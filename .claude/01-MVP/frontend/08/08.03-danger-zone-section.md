# Task 08.03: Danger Zone Section

**Status**: ✅ **COMPLETED**
**Completed**: 2025-11-06
**Duration**: 60 minutes
**Dependencies**: Task 08.01 (Account Settings Section - COMPLETED), Task 08.02 (App Preferences Section - COMPLETED)
**Created**: 2025-11-06
**File**: [08.03-danger-zone-section.md](./08.03-danger-zone-section.md)

---

## Overview

### Description

Create the **DangerZoneSection** component for the Settings page that provides secure, multi-step confirmation flows for destructive account actions: account deletion (with password verification) and learning progress reset. This section implements critical safety patterns to prevent accidental data loss while empowering users with self-service account management.

### Why It's Important

Destructive account actions are among the most sensitive features in any SaaS application. Users need:
- **Control**: Ability to delete their account or reset progress without contacting support
- **Safety**: Strong confirmation patterns that prevent accidental data loss
- **Clarity**: Clear understanding of consequences before taking irreversible actions
- **Trust**: Confidence that the application handles their data responsibly

This section demonstrates product maturity by providing professional-grade account management while maintaining the highest UX and security standards.

### Success Criteria

1. **Delete Account Flow**:
   - Multi-step confirmation (3 steps minimum)
   - Password verification required
   - Clear explanation of consequences at each step
   - Final confirmation with explicit acknowledgment
   - All user data cleared on success
   - Automatic logout and redirect to home page
   - Success notification visible

2. **Reset Progress Flow**:
   - Multi-step confirmation (2 steps minimum)
   - Type-to-confirm pattern ("RESET" exact match, case-sensitive)
   - Clear list of what will be deleted
   - Learning data cleared, account preserved
   - Success notification after reset
   - User remains logged in

3. **Visual Design**:
   - Strong visual warnings (red color scheme)
   - AlertTriangle icons for destructive actions
   - Clear section boundary with danger styling
   - Proper spacing and visual hierarchy
   - Matches AccountSection Card layout pattern

4. **Technical Requirements**:
   - TypeScript: 0 compilation errors
   - Build: SUCCESS with no warnings
   - Mobile responsive (375px - 1440px+)
   - Loading states during async operations
   - Comprehensive error handling
   - Integration with authStore for account deletion
   - Integration with deckStore, reviewStore, analyticsStore for progress reset

---

## Component Design

### DangerZoneSection Component Structure

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/DangerZoneSection.tsx`

**Component Architecture**:
```
DangerZoneSection
└── Card Container (with red border styling)
    ├── CardHeader
    │   ├── CardTitle: "Danger Zone" (with AlertTriangle icon)
    │   └── CardDescription: "Irreversible actions that affect your account and data"
    │
    └── CardContent
        ├── Reset Progress Action
        │   ├── AlertTriangle icon + "Reset All Progress" label
        │   ├── Description: "Delete all deck progress, reviews, and statistics"
        │   ├── Warning: "Your account will remain active"
        │   └── Button: "Reset All Progress" (red outline)
        │       → Opens ResetProgressDialog
        │
        └── Delete Account Action
            ├── AlertTriangle icon + "Delete Account" label
            ├── Description: "Permanently delete your account and all data"
            ├── Warning: "This action cannot be undone"
            └── Button: "Delete Account" (red filled, destructive)
                → Opens DeleteAccountDialog
```

### TypeScript Interfaces

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/types/settings.ts` (UPDATE EXISTING)

**Add to existing interfaces**:
```typescript
/**
 * Delete account form data
 * Requires password verification for security
 */
export interface DeleteAccountData {
  password: string;
  confirmText: string; // Must type "DELETE" to confirm
}

/**
 * Danger zone action types
 */
export type DangerZoneActionType = 'delete-account' | 'reset-progress';

/**
 * Danger zone action state
 */
export interface DangerZoneAction {
  type: DangerZoneActionType;
  confirmed: boolean;
  inProgress: boolean;
}
```

### Delete Account Dialog Flow

**Component**: `DeleteAccountDialog.tsx`

**3-Step Confirmation Flow**:

**Step 1: Warning and Consequences**
- Title: "Delete Account"
- Icon: AlertTriangle (red)
- Content:
  - "This will permanently delete your account and all associated data:"
  - Bulleted list:
    - All learning progress and review history
    - All custom decks and flashcards
    - All statistics and achievements
    - Your account credentials and profile
  - Warning: "This action cannot be undone. There is no recovery option."
- Buttons:
  - Cancel (outline, disabled during loading)
  - Continue (red destructive, proceeds to Step 2)

**Step 2: Password Verification**
- Title: "Verify Your Identity"
- Description: "Enter your current password to confirm account deletion"
- Content:
  - PasswordField component (from Task 07)
  - Label: "Current Password"
  - Placeholder: "Enter your password"
  - Validation: Required, min 8 characters
  - Error handling: Wrong password shows "Incorrect password" error
- Buttons:
  - Back (outline, returns to Step 1)
  - Continue (red destructive, disabled until valid password entered)

**Step 3: Final Confirmation**
- Title: "Final Confirmation"
- Description: "Type DELETE to confirm account deletion"
- Content:
  - FormField component (text input)
  - Label: 'Type "DELETE" to confirm'
  - Placeholder: "DELETE"
  - Validation: Must match exactly (case-sensitive)
  - Checkbox: "I understand this action cannot be undone"
- Buttons:
  - Back (outline, returns to Step 2)
  - Delete My Account (red destructive, disabled until validation passes)
  - Shows loading spinner during deletion

**On Success**:
- Clear all stores (auth, deck, review, analytics)
- Clear localStorage and sessionStorage
- Show success toast: "Account deleted successfully"
- Redirect to login page (`/login`)

### Reset Progress Dialog Flow

**Component**: `ResetProgressDialog.tsx`

**2-Step Confirmation Flow**:

**Step 1: Warning and Consequences**
- Title: "Reset All Progress"
- Icon: AlertTriangle (red)
- Content:
  - "This will permanently delete the following data:"
  - Bulleted list:
    - All deck progress (new, learning, review cards)
    - All review history and session data
    - All statistics and analytics
    - All achievement progress
  - Preserved:
    - Your account and login credentials
    - Your app preferences and settings
    - Your subscription status
  - Warning: "This action cannot be undone."
- Buttons:
  - Cancel (outline, disabled during loading)
  - Continue (red destructive, proceeds to Step 2)

**Step 2: Type-to-Confirm**
- Title: "Confirm Progress Reset"
- Description: "Type RESET to confirm this action"
- Content:
  - FormField component (text input)
  - Label: 'Type "RESET" to confirm'
  - Placeholder: "RESET"
  - Validation: Must match exactly (case-sensitive)
  - Real-time validation indicator (checkmark appears when valid)
- Buttons:
  - Back (outline, returns to Step 1)
  - Reset My Progress (red destructive, disabled until "RESET" typed correctly)
  - Shows loading spinner during reset

**On Success**:
- Call `deckStore.resetProgress()`
- Call `reviewStore.resetProgress()`
- Call `analyticsStore.clearData()`
- Keep authStore intact (user remains logged in)
- Show success toast: "Learning progress reset successfully"
- Redirect to dashboard (`/dashboard`)
- Close dialog

---

## Implementation Steps

### Step 1: Create DangerZoneSection Component Shell (5 min)

**Action**: Create component file with Card structure and danger styling

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/DangerZoneSection.tsx`

**Initial Content**:
```typescript
import React, { useState } from 'react';
import { AlertTriangle } from 'lucide-react';

import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';

/**
 * DangerZoneSection Component
 *
 * Provides destructive account actions with multi-step confirmation:
 * - Delete Account (3-step: warning → password → final confirm)
 * - Reset Progress (2-step: warning → type-to-confirm)
 *
 * Features strong visual warnings (red color scheme) and safety patterns
 * to prevent accidental data loss.
 */
export function DangerZoneSection() {
  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);
  const [resetDialogOpen, setResetDialogOpen] = useState(false);

  return (
    <Card className="border-red-200 bg-red-50/50">
      <CardHeader>
        <div className="flex items-center gap-2">
          <AlertTriangle className="h-5 w-5 text-red-600" />
          <CardTitle className="text-red-600">Danger Zone</CardTitle>
        </div>
        <CardDescription className="text-red-600/80">
          Irreversible actions that affect your account and data. Proceed with caution.
        </CardDescription>
      </CardHeader>
      <CardContent className="space-y-6">
        {/* TODO: Reset Progress Section */}
        {/* TODO: Delete Account Section */}
      </CardContent>
    </Card>
  );
}
```

**Styling Notes**:
- Card border: `border-red-200` (light red)
- Card background: `bg-red-50/50` (very light red with 50% opacity)
- Icons: `text-red-600` (strong red)
- Title: `text-red-600`
- Description: `text-red-600/80` (slightly muted)

**Verification**: Component renders with red danger styling when imported into Settings.tsx

---

### Step 2: Add Reset Progress Section UI (7 min)

**Action**: Add Reset Progress action with button and description

**Code Addition** (within CardContent):
```typescript
{/* Reset Progress Section */}
<div className="space-y-3">
  <div className="flex items-start gap-3">
    <AlertTriangle className="h-5 w-5 text-red-600 mt-0.5" />
    <div className="flex-1 space-y-2">
      <div>
        <h3 className="font-medium text-red-900">Reset All Progress</h3>
        <p className="text-sm text-red-700 mt-1">
          Delete all deck progress, reviews, and statistics. Your account will remain active.
        </p>
      </div>
      <Button
        variant="outline"
        size="sm"
        className="border-red-300 text-red-700 hover:bg-red-100 hover:text-red-900"
        onClick={() => setResetDialogOpen(true)}
      >
        Reset All Progress
      </Button>
    </div>
  </div>
</div>
```

**Verification**: Reset Progress section renders with proper red styling and button

---

### Step 3: Add Delete Account Section UI (7 min)

**Action**: Add Delete Account action with button and description

**Code Addition** (within CardContent, after Reset Progress):
```typescript
{/* Divider */}
<div className="border-t border-red-200" />

{/* Delete Account Section */}
<div className="space-y-3">
  <div className="flex items-start gap-3">
    <AlertTriangle className="h-5 w-5 text-red-600 mt-0.5" />
    <div className="flex-1 space-y-2">
      <div>
        <h3 className="font-medium text-red-900">Delete Account</h3>
        <p className="text-sm text-red-700 mt-1">
          Permanently delete your account and all data. This action cannot be undone.
        </p>
      </div>
      <Button
        variant="destructive"
        size="sm"
        onClick={() => setDeleteDialogOpen(true)}
      >
        Delete Account
      </Button>
    </div>
  </div>
</div>
```

**Verification**: Delete Account section renders with destructive button styling

---

### Step 4: Create ResetProgressDialog Component (20 min)

**Action**: Create 2-step confirmation dialog for progress reset

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/ResetProgressDialog.tsx`

**Content**:
```typescript
import React, { useState } from 'react';
import { AlertTriangle } from 'lucide-react';
import { useNavigate } from 'react-router-dom';

import { Button } from '@/components/ui/button';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { FormField } from '@/components/forms/FormField';
import { useToast } from '@/hooks/use-toast';
import { useDeckStore } from '@/stores/deckStore';
import { useReviewStore } from '@/stores/reviewStore';
import { useAnalyticsStore } from '@/stores/analyticsStore';

interface ResetProgressDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

type DialogStep = 'warning' | 'confirm';

/**
 * ResetProgressDialog Component
 *
 * Multi-step dialog for resetting all learning progress:
 * - Step 1: Warning with list of what will be deleted
 * - Step 2: Type "RESET" to confirm (case-sensitive)
 *
 * On success:
 * - Clears deck, review, and analytics data
 * - Keeps user account and preferences intact
 * - Redirects to dashboard
 */
export function ResetProgressDialog({ open, onOpenChange }: ResetProgressDialogProps) {
  const navigate = useNavigate();
  const { toast } = useToast();

  const resetDeckProgress = useDeckStore((state) => state.resetProgress);
  const resetReviewProgress = useReviewStore((state) => state.resetProgress);
  const clearAnalytics = useAnalyticsStore((state) => state.clearAnalytics);

  const [step, setStep] = useState<DialogStep>('warning');
  const [confirmText, setConfirmText] = useState('');
  const [isResetting, setIsResetting] = useState(false);

  const isConfirmValid = confirmText === 'RESET';

  const handleClose = () => {
    if (isResetting) return; // Prevent closing during reset
    setStep('warning');
    setConfirmText('');
    onOpenChange(false);
  };

  const handleContinue = () => {
    setStep('confirm');
  };

  const handleBack = () => {
    setStep('warning');
    setConfirmText('');
  };

  const handleReset = async () => {
    if (!isConfirmValid) return;

    setIsResetting(true);

    try {
      // Clear all learning data
      resetDeckProgress();
      resetReviewProgress();
      clearAnalytics();

      toast({
        title: 'Progress reset successfully',
        description: 'All learning data has been cleared. Your account remains active.',
      });

      handleClose();

      // Redirect to dashboard after short delay
      setTimeout(() => {
        navigate('/dashboard');
      }, 500);
    } catch (error) {
      toast({
        title: 'Failed to reset progress',
        description: error instanceof Error ? error.message : 'An unexpected error occurred',
        variant: 'destructive',
      });
    } finally {
      setIsResetting(false);
    }
  };

  return (
    <Dialog open={open} onOpenChange={handleClose}>
      <DialogContent className="sm:max-w-md">
        {step === 'warning' && (
          <>
            <DialogHeader>
              <DialogTitle className="flex items-center gap-2 text-red-600">
                <AlertTriangle className="h-5 w-5" />
                Reset All Progress
              </DialogTitle>
              <DialogDescription>
                This will permanently delete the following data:
              </DialogDescription>
            </DialogHeader>

            <div className="space-y-4">
              <ul className="list-disc list-inside space-y-2 text-sm text-muted-foreground">
                <li>All deck progress (new, learning, review cards)</li>
                <li>All review history and session data</li>
                <li>All statistics and analytics</li>
                <li>All achievement progress</li>
              </ul>

              <div className="p-3 bg-green-50 border border-green-200 rounded-md">
                <p className="text-sm text-green-800 font-medium">Preserved Data:</p>
                <ul className="list-disc list-inside text-sm text-green-700 mt-1">
                  <li>Your account and login credentials</li>
                  <li>Your app preferences and settings</li>
                  <li>Your subscription status</li>
                </ul>
              </div>

              <div className="p-3 bg-red-50 border border-red-200 rounded-md">
                <p className="text-sm text-red-800 font-semibold">
                  This action cannot be undone.
                </p>
              </div>
            </div>

            <DialogFooter>
              <Button variant="outline" onClick={handleClose}>
                Cancel
              </Button>
              <Button variant="destructive" onClick={handleContinue}>
                Continue
              </Button>
            </DialogFooter>
          </>
        )}

        {step === 'confirm' && (
          <>
            <DialogHeader>
              <DialogTitle className="flex items-center gap-2 text-red-600">
                <AlertTriangle className="h-5 w-5" />
                Confirm Progress Reset
              </DialogTitle>
              <DialogDescription>
                Type RESET to confirm this action
              </DialogDescription>
            </DialogHeader>

            <div className="space-y-4">
              <FormField
                label='Type "RESET" to confirm'
                name="confirmText"
                type="text"
                value={confirmText}
                onChange={setConfirmText}
                placeholder="RESET"
                required
                autoComplete="off"
              />

              {confirmText && !isConfirmValid && (
                <p className="text-sm text-red-600">
                  Please type "RESET" exactly (case-sensitive)
                </p>
              )}

              {isConfirmValid && (
                <p className="text-sm text-green-600 flex items-center gap-1">
                  <span className="inline-block">✓</span> Ready to reset progress
                </p>
              )}
            </div>

            <DialogFooter>
              <Button variant="outline" onClick={handleBack} disabled={isResetting}>
                Back
              </Button>
              <Button
                variant="destructive"
                onClick={handleReset}
                disabled={!isConfirmValid || isResetting}
              >
                {isResetting ? 'Resetting...' : 'Reset My Progress'}
              </Button>
            </DialogFooter>
          </>
        )}
      </DialogContent>
    </Dialog>
  );
}
```

**Verification**:
- Dialog opens when "Reset All Progress" button clicked
- Step 1 shows warning with bulleted lists
- Step 2 validates "RESET" text input (case-sensitive)
- Confirm button disabled until "RESET" typed correctly
- Progress resets and redirects to dashboard on success

---

### Step 5: Create DeleteAccountDialog Component (20 min)

**Action**: Create 3-step confirmation dialog for account deletion

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/DeleteAccountDialog.tsx`

**Content**:
```typescript
import React, { useState } from 'react';
import { AlertTriangle } from 'lucide-react';
import { useNavigate } from 'react-router-dom';

import { Button } from '@/components/ui/button';
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogFooter,
  DialogHeader,
  DialogTitle,
} from '@/components/ui/dialog';
import { PasswordField } from '@/components/forms/PasswordField';
import { FormField } from '@/components/forms/FormField';
import { Checkbox } from '@/components/ui/checkbox';
import { Label } from '@/components/ui/label';
import { useToast } from '@/hooks/use-toast';
import { useAuthStore } from '@/stores/authStore';

interface DeleteAccountDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}

type DialogStep = 'warning' | 'password' | 'confirm';

/**
 * DeleteAccountDialog Component
 *
 * Multi-step dialog for account deletion:
 * - Step 1: Warning with list of consequences
 * - Step 2: Password verification
 * - Step 3: Type "DELETE" + checkbox to confirm
 *
 * On success:
 * - Deletes account and all data
 * - Logs out user
 * - Redirects to home page
 */
export function DeleteAccountDialog({ open, onOpenChange }: DeleteAccountDialogProps) {
  const navigate = useNavigate();
  const { toast } = useToast();
  const { logout } = useAuthStore();

  const [step, setStep] = useState<DialogStep>('warning');
  const [password, setPassword] = useState('');
  const [confirmText, setConfirmText] = useState('');
  const [acknowledged, setAcknowledged] = useState(false);
  const [passwordError, setPasswordError] = useState('');
  const [isDeleting, setIsDeleting] = useState(false);

  const isPasswordValid = password.length >= 8;
  const isConfirmValid = confirmText === 'DELETE' && acknowledged;

  const handleClose = () => {
    if (isDeleting) return; // Prevent closing during deletion
    setStep('warning');
    setPassword('');
    setConfirmText('');
    setAcknowledged(false);
    setPasswordError('');
    onOpenChange(false);
  };

  const handleContinueFromWarning = () => {
    setStep('password');
  };

  const handleBackToWarning = () => {
    setStep('warning');
    setPassword('');
    setPasswordError('');
  };

  const handleVerifyPassword = async () => {
    if (!isPasswordValid) {
      setPasswordError('Password must be at least 8 characters');
      return;
    }

    // TODO: In production, verify password against backend
    // For MVP with mockAuthAPI, we'll simulate verification
    // In real implementation: const isValid = await authStore.verifyPassword(password);

    // Simulate password verification (for MVP)
    // In production, this would call an API endpoint
    const mockPasswordValid = true; // Replace with actual verification

    if (!mockPasswordValid) {
      setPasswordError('Incorrect password');
      return;
    }

    setPasswordError('');
    setStep('confirm');
  };

  const handleBackToPassword = () => {
    setStep('password');
    setConfirmText('');
    setAcknowledged(false);
  };

  const handleDelete = async () => {
    if (!isConfirmValid) return;

    setIsDeleting(true);

    try {
      // Delete account (this will clear all data and logout)
      await logout();

      // Clear all localStorage/sessionStorage
      localStorage.clear();
      sessionStorage.clear();

      toast({
        title: 'Account deleted successfully',
        description: 'Your account and all data have been permanently deleted.',
      });

      handleClose();

      // Redirect to home/login page after short delay
      setTimeout(() => {
        navigate('/');
      }, 500);
    } catch (error) {
      toast({
        title: 'Failed to delete account',
        description: error instanceof Error ? error.message : 'An unexpected error occurred',
        variant: 'destructive',
      });
    } finally {
      setIsDeleting(false);
    }
  };

  return (
    <Dialog open={open} onOpenChange={handleClose}>
      <DialogContent className="sm:max-w-md">
        {step === 'warning' && (
          <>
            <DialogHeader>
              <DialogTitle className="flex items-center gap-2 text-red-600">
                <AlertTriangle className="h-5 w-5" />
                Delete Account
              </DialogTitle>
              <DialogDescription>
                This will permanently delete your account and all associated data
              </DialogDescription>
            </DialogHeader>

            <div className="space-y-4">
              <ul className="list-disc list-inside space-y-2 text-sm text-muted-foreground">
                <li>All learning progress and review history</li>
                <li>All custom decks and flashcards</li>
                <li>All statistics and achievements</li>
                <li>Your account credentials and profile</li>
              </ul>

              <div className="p-3 bg-red-50 border border-red-200 rounded-md">
                <p className="text-sm text-red-800 font-semibold">
                  This action cannot be undone. There is no recovery option.
                </p>
              </div>
            </div>

            <DialogFooter>
              <Button variant="outline" onClick={handleClose}>
                Cancel
              </Button>
              <Button variant="destructive" onClick={handleContinueFromWarning}>
                Continue
              </Button>
            </DialogFooter>
          </>
        )}

        {step === 'password' && (
          <>
            <DialogHeader>
              <DialogTitle className="flex items-center gap-2 text-red-600">
                <AlertTriangle className="h-5 w-5" />
                Verify Your Identity
              </DialogTitle>
              <DialogDescription>
                Enter your current password to confirm account deletion
              </DialogDescription>
            </DialogHeader>

            <div className="space-y-4">
              <PasswordField
                label="Current Password"
                name="password"
                value={password}
                onChange={setPassword}
                error={passwordError}
                placeholder="Enter your password"
                required
                autoComplete="current-password"
              />
            </div>

            <DialogFooter>
              <Button variant="outline" onClick={handleBackToWarning} disabled={isDeleting}>
                Back
              </Button>
              <Button
                variant="destructive"
                onClick={handleVerifyPassword}
                disabled={!isPasswordValid || isDeleting}
              >
                Continue
              </Button>
            </DialogFooter>
          </>
        )}

        {step === 'confirm' && (
          <>
            <DialogHeader>
              <DialogTitle className="flex items-center gap-2 text-red-600">
                <AlertTriangle className="h-5 w-5" />
                Final Confirmation
              </DialogTitle>
              <DialogDescription>
                Type DELETE to confirm account deletion
              </DialogDescription>
            </DialogHeader>

            <div className="space-y-4">
              <FormField
                label='Type "DELETE" to confirm'
                name="confirmText"
                type="text"
                value={confirmText}
                onChange={setConfirmText}
                placeholder="DELETE"
                required
                autoComplete="off"
              />

              {confirmText && confirmText !== 'DELETE' && (
                <p className="text-sm text-red-600">
                  Please type "DELETE" exactly (case-sensitive)
                </p>
              )}

              <div className="flex items-center space-x-2">
                <Checkbox
                  id="acknowledge"
                  checked={acknowledged}
                  onCheckedChange={(checked) => setAcknowledged(checked === true)}
                />
                <Label
                  htmlFor="acknowledge"
                  className="text-sm font-normal cursor-pointer"
                >
                  I understand this action cannot be undone
                </Label>
              </div>

              {isConfirmValid && (
                <p className="text-sm text-green-600 flex items-center gap-1">
                  <span className="inline-block">✓</span> Ready to delete account
                </p>
              )}
            </div>

            <DialogFooter>
              <Button variant="outline" onClick={handleBackToPassword} disabled={isDeleting}>
                Back
              </Button>
              <Button
                variant="destructive"
                onClick={handleDelete}
                disabled={!isConfirmValid || isDeleting}
              >
                {isDeleting ? 'Deleting...' : 'Delete My Account'}
              </Button>
            </DialogFooter>
          </>
        )}
      </DialogContent>
    </Dialog>
  );
}
```

**Verification**:
- Dialog opens when "Delete Account" button clicked
- Step 1 shows warning with bulleted list
- Step 2 validates password (min 8 characters)
- Step 3 validates "DELETE" text + checkbox
- Confirm button disabled until all validation passes
- Account deleted and user logged out on success

---

### Step 6: Integrate Dialogs into DangerZoneSection (3 min)

**Action**: Import and render dialogs in DangerZoneSection

**Code Addition** (at top of DangerZoneSection.tsx):
```typescript
import { ResetProgressDialog } from './ResetProgressDialog';
import { DeleteAccountDialog } from './DeleteAccountDialog';
```

**Code Addition** (after CardContent closing tag):
```typescript
{/* Dialogs */}
<ResetProgressDialog
  open={resetDialogOpen}
  onOpenChange={setResetDialogOpen}
/>
<DeleteAccountDialog
  open={deleteDialogOpen}
  onOpenChange={setDeleteDialogOpen}
/>
```

**Verification**: Dialogs open when respective buttons are clicked

---

### Step 7: Update Store Methods (if needed) (5 min)

**Action**: Ensure all stores have reset/delete methods

**Check authStore** (`src/stores/authStore.ts`):
- Verify `logout()` method exists (it does - see line 102-130)
- No additional methods needed

**Check deckStore** (`src/stores/deckStore.ts`):
```typescript
// Add if not exists
resetProgress: () => {
  set({
    decks: [],
    selectedDeck: null,
    // Reset to initial state
  });

  // Clear localStorage for decks
  localStorage.removeItem('deck-storage');
}
```

**Check reviewStore** (`src/stores/reviewStore.ts`):
```typescript
// Add if not exists
resetProgress: () => {
  set({
    reviewCards: [],
    reviewSession: null,
    // Reset to initial state
  });

  // Clear localStorage for reviews
  localStorage.removeItem('review-storage');
}
```

**Check analyticsStore** (`src/stores/analyticsStore.ts`):
- Verify `clearAnalytics()` method exists (it does - see line 127)

**Verification**: All stores have necessary reset methods

---

### Step 8: Update index.ts Barrel Export (1 min)

**Action**: Add DangerZoneSection to settings components export

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/index.ts`

**Update Content**:
```typescript
export { AccountSection } from './AccountSection';
export { AppPreferencesSection } from './AppPreferencesSection';
export { DangerZoneSection } from './DangerZoneSection';
```

**Verification**: Import works: `import { DangerZoneSection } from '@/components/settings';`

---

### Step 9: Test Reset Progress Flow (5 min)

**Testing Steps**:
1. Navigate to Settings page (`/settings`)
2. Click "Reset All Progress" button
3. Step 1: Verify warning shows list of deleted + preserved data
4. Click "Cancel" → Dialog closes
5. Click "Reset All Progress" again → Click "Continue"
6. Step 2: Try submitting with "reset" (lowercase) → Validation error
7. Type "RESET" (exact match) → Checkmark appears
8. Click "Reset My Progress" → Loading state appears
9. Success toast displays
10. Redirected to dashboard
11. Verify learning data cleared (no decks, no reviews, no stats)
12. Verify account still active (user logged in)

**Expected Results**:
- Multi-step flow works correctly
- Type-to-confirm validates case-sensitive "RESET"
- Loading state shown during reset
- Success toast appears
- Redirect to dashboard happens
- Learning data cleared, account preserved

---

### Step 10: Test Delete Account Flow (5 min)

**Testing Steps**:
1. Navigate to Settings page (`/settings`)
2. Click "Delete Account" button
3. Step 1: Verify warning shows consequences
4. Click "Cancel" → Dialog closes
5. Click "Delete Account" again → Click "Continue"
6. Step 2: Enter short password (<8 chars) → Validation error
7. Enter valid password → Click "Continue"
8. Step 3: Try submitting without typing "DELETE" → Button disabled
9. Type "delete" (lowercase) → Validation error
10. Type "DELETE" → Check the acknowledgment checkbox
11. Checkmark appears showing "Ready to delete account"
12. Click "Delete My Account" → Loading state appears
13. Success toast displays
14. User logged out
15. Redirected to home page (`/`)
16. Verify localStorage cleared
17. Try accessing `/settings` → Redirected to login

**Expected Results**:
- Multi-step flow works correctly
- Password validation works (min 8 chars)
- Type-to-confirm validates case-sensitive "DELETE"
- Checkbox required for final confirmation
- Loading state shown during deletion
- Success toast appears
- User logged out and redirected to home
- All data cleared from localStorage

---

### Step 11: Mobile Responsive Testing (3 min)

**Testing Steps**:
1. Test DangerZoneSection at 375px width (iPhone SE):
   - Red danger styling visible
   - Text remains readable
   - Buttons tappable (min 44px height)
   - Dialogs fit screen without horizontal scroll

2. Test dialogs at 375px width:
   - Step-by-step navigation works
   - Form fields usable
   - Buttons properly sized
   - Content scrollable if needed

3. Test at 768px width (iPad):
   - Layout adapts naturally
   - Dialogs remain centered

4. Test at 1024px+ width (Desktop):
   - DangerZoneSection respects max-width
   - Dialogs centered and readable

**Expected Results**:
- No horizontal scroll at any breakpoint
- Text readable at all sizes
- Buttons easily tappable on mobile
- Dialogs remain usable on small screens

---

### Step 12: Update Documentation (3 min)

**Action**: Update settings-components.md with DangerZone components

**File**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/docs/components/settings-components.md`

**Add after AppPreferencesSection** (see Documentation section below for full content)

**Verification**: Documentation is clear, accurate, and matches implementation

---

## UI/UX Specifications

### Layout and Structure

**DangerZoneSection Container**:
- Component: Card (shadcn/ui)
- Border: `border-red-200` (light red)
- Background: `bg-red-50/50` (very light red with 50% opacity)
- Padding: Same as AccountSection (`p-6` / 24px)
- Spacing: `space-y-6` between actions

**Section Header**:
- Icon: AlertTriangle (lucide-react, 20px, `text-red-600`)
- Title: "Danger Zone" (`text-red-600`, `font-semibold`)
- Description: "Irreversible actions..." (`text-red-600/80`)
- Layout: Flex with gap-2 for icon + title

**Action Containers**:
- Layout: Flex with AlertTriangle icon on left, content on right
- Icon: 20px (`h-5 w-5`), `text-red-600`, aligned to top
- Text: `text-red-900` for headings, `text-red-700` for descriptions
- Buttons: Different styles for each action (see below)
- Spacing: `space-y-3` between actions
- Divider: `border-t border-red-200` between actions

### Button Styling

**Reset Progress Button**:
- Variant: `outline`
- Size: `sm`
- Custom classes: `border-red-300 text-red-700 hover:bg-red-100 hover:text-red-900`
- Purpose: Softer visual (outline) since less destructive than account deletion

**Delete Account Button**:
- Variant: `destructive` (Shadcn's red destructive variant)
- Size: `sm`
- Purpose: Strong visual warning for most destructive action

### Dialog Styling

**Dialog Structure** (both dialogs):
- Max width: `sm:max-w-md` (448px)
- Title: Flex layout with AlertTriangle icon, red text (`text-red-600`)
- Description: Gray text (`text-muted-foreground`)
- Content: Proper spacing with `space-y-4`

**Warning Messages**:
- Bulleted lists: `list-disc list-inside`, small text (`text-sm`)
- Red warning boxes: `bg-red-50 border border-red-200 rounded-md`, `p-3`
- Green preserved boxes (Reset Progress): `bg-green-50 border border-green-200`
- Font weight: Semibold for emphasis (`font-semibold`)

**Form Fields**:
- Use PasswordField component for password input
- Use FormField component for text inputs
- Placeholder text for guidance ("DELETE", "RESET")
- Real-time validation feedback

**Buttons in Dialogs**:
- Cancel/Back: Outline variant, disabled during loading
- Continue: Destructive variant
- Final action: Destructive variant with loading state
- Loading text: "Deleting..." or "Resetting..."

### Color Scheme (Red Danger Theme)

**Primary Danger Colors**:
- Red-50: `#FEF2F2` - Light background
- Red-200: `#FECACA` - Borders
- Red-300: `#FCA5A5` - Button borders
- Red-600: `#DC2626` - Icons, titles, emphasis
- Red-700: `#B91C1C` - Text, hover states
- Red-800: `#991B1B` - Warning text (strong)
- Red-900: `#7F1D1D` - Headings

**Success/Preserved Colors** (for contrast):
- Green-50: `#F0FDF4` - Preserved data background
- Green-200: `#BBF7D0` - Preserved data border
- Green-600: `#16A34A` - Success checkmark
- Green-700: `#15803D` - Preserved text
- Green-800: `#166534` - Preserved heading

### Typography

**Section Headers**:
- Font size: Default (16px)
- Font weight: Semibold (600)
- Color: Red-600

**Action Titles**:
- Font size: Default (16px)
- Font weight: Medium (500)
- Color: Red-900

**Descriptions**:
- Font size: Small (14px)
- Font weight: Normal (400)
- Color: Red-700

**Warning Messages**:
- Font size: Small (14px)
- Font weight: Semibold (600)
- Color: Red-800

### Success/Error Messaging

**Success Toasts** (useToast with default variant):
- Reset Progress: "Progress reset successfully" / "All learning data has been cleared. Your account remains active."
- Delete Account: "Account deleted successfully" / "Your account and all data have been permanently deleted."
- Duration: Auto-dismiss after 5 seconds

**Error Toasts** (useToast with destructive variant):
- Reset Progress: "Failed to reset progress" / [Error message]
- Delete Account: "Failed to delete account" / [Error message]
- Password Verification: "Incorrect password" (inline error, not toast)
- Duration: Auto-dismiss after 5 seconds

**Validation Messages**:
- Wrong password: "Incorrect password" (red text below password field)
- Wrong confirm text: 'Please type "DELETE" exactly (case-sensitive)' (red text below input)
- Success validation: "✓ Ready to delete account" (green text with checkmark)

### Responsive Breakpoints

**Mobile (< 768px)**:
- Single column layout
- Full-width buttons
- Dialogs fit screen width (with padding)
- Content scrollable if needed

**Tablet (768px - 1023px)**:
- Same as desktop (DangerZone is inherently simple)
- Dialogs centered

**Desktop (1024px+)**:
- Container constrained by parent max-width (4xl)
- Dialogs centered and readable
- No excessive whitespace

---

## Files to Create/Modify

### Files to Create

1. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/DangerZoneSection.tsx`**
   - **Purpose**: Main DangerZoneSection component with red danger styling
   - **Estimated Lines**: ~120 lines
   - **Content**:
     - Card with danger styling (red border, background)
     - Reset Progress action with button
     - Delete Account action with button
     - Dialog state management

2. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/ResetProgressDialog.tsx`**
   - **Purpose**: 2-step confirmation dialog for progress reset
   - **Estimated Lines**: ~200 lines
   - **Content**:
     - Step 1: Warning with bulleted lists
     - Step 2: Type-to-confirm with "RESET" validation
     - Store integration (deck, review, analytics)
     - Success toast and redirect

3. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/DeleteAccountDialog.tsx`**
   - **Purpose**: 3-step confirmation dialog for account deletion
   - **Estimated Lines**: ~250 lines
   - **Content**:
     - Step 1: Warning with consequences list
     - Step 2: Password verification
     - Step 3: Type-to-confirm + checkbox
     - Account deletion, logout, redirect

### Files to Modify

4. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/components/settings/index.ts`**
   - **Modification**: Add DangerZoneSection export
   - **Lines Added**: 1 line
   - **Purpose**: Enable barrel import from settings module

5. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/types/settings.ts`**
   - **Modification**: Add DeleteAccountData, DangerZoneActionType, DangerZoneAction interfaces
   - **Lines Added**: ~20 lines
   - **Purpose**: Type safety for danger zone components

6. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/stores/deckStore.ts`** (if needed)
   - **Modification**: Add `resetProgress()` method
   - **Lines Added**: ~15 lines
   - **Purpose**: Clear all deck data

7. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/stores/reviewStore.ts`** (if needed)
   - **Modification**: Add `resetProgress()` method
   - **Lines Added**: ~15 lines
   - **Purpose**: Clear all review data

8. **`/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/docs/components/settings-components.md`**
   - **Modification**: Add DangerZoneSection, ResetProgressDialog, DeleteAccountDialog documentation
   - **Lines Added**: ~150 lines
   - **Purpose**: Document danger zone components and patterns

---

## Code Examples

### Example 1: Complete DangerZoneSection Component

See Step 1 and subsequent steps above for the complete implementation.

### Example 2: Store Reset Methods

**deckStore.ts** (add if not exists):
```typescript
resetProgress: () => {
  set({
    decks: [],
    selectedDeck: null,
    isLoading: false,
    error: null,
  });

  // Clear localStorage
  localStorage.removeItem('deck-storage');
}
```

**reviewStore.ts** (add if not exists):
```typescript
resetProgress: () => {
  set({
    reviewCards: [],
    reviewSession: null,
    isLoading: false,
    error: null,
  });

  // Clear localStorage
  localStorage.removeItem('review-storage');
}
```

---

## Testing Checklist

### Functional Tests

**DangerZoneSection**:
- [ ] Section renders with red danger styling
- [ ] AlertTriangle icons visible
- [ ] Both action buttons present (Reset Progress, Delete Account)
- [ ] Red border and background visible
- [ ] Section title and description displayed

**Reset Progress Flow**:
- [ ] "Reset All Progress" button opens dialog
- [ ] Step 1 shows warning with deleted data list
- [ ] Step 1 shows preserved data list (green box)
- [ ] Step 1 "Cancel" button closes dialog
- [ ] Step 1 "Continue" button proceeds to Step 2
- [ ] Step 2 validates "RESET" text (case-sensitive)
- [ ] Step 2 shows validation error for incorrect text
- [ ] Step 2 shows success checkmark when "RESET" typed
- [ ] Step 2 "Back" button returns to Step 1
- [ ] Step 2 "Reset My Progress" button disabled until valid
- [ ] Progress resets on confirmation (decks, reviews, analytics cleared)
- [ ] Success toast displays
- [ ] User redirected to dashboard
- [ ] User remains logged in
- [ ] Account and settings preserved

**Delete Account Flow**:
- [ ] "Delete Account" button opens dialog
- [ ] Step 1 shows warning with consequences list
- [ ] Step 1 "Cancel" button closes dialog
- [ ] Step 1 "Continue" button proceeds to Step 2
- [ ] Step 2 requires password (min 8 characters)
- [ ] Step 2 shows validation error for short password
- [ ] Step 2 "Back" button returns to Step 1
- [ ] Step 2 "Continue" button proceeds to Step 3
- [ ] Step 3 validates "DELETE" text (case-sensitive)
- [ ] Step 3 requires checkbox acknowledgment
- [ ] Step 3 shows validation error for incorrect text
- [ ] Step 3 shows success checkmark when valid
- [ ] Step 3 "Back" button returns to Step 2
- [ ] Step 3 "Delete My Account" disabled until valid
- [ ] Account deleted on confirmation
- [ ] All data cleared (localStorage, sessionStorage)
- [ ] User logged out
- [ ] Success toast displays
- [ ] User redirected to home page
- [ ] Cannot access protected routes after deletion

### Error Handling Tests

**Reset Progress Errors**:
- [ ] Network error shows destructive toast
- [ ] Error toast displays descriptive message
- [ ] Dialog remains open on error
- [ ] User can retry

**Delete Account Errors**:
- [ ] Wrong password shows inline error
- [ ] Network error shows destructive toast
- [ ] Error toast displays descriptive message
- [ ] Dialog remains open on error
- [ ] User can retry

**Edge Cases**:
- [ ] Closing dialog mid-flow resets state
- [ ] Back button preserves previous step data
- [ ] Loading states prevent multiple submissions
- [ ] Dialog cannot be closed during operations

### UI/UX Tests

**Visual Design**:
- [ ] Red danger styling throughout
- [ ] AlertTriangle icons visible and red
- [ ] Proper contrast for text readability
- [ ] Warning boxes stand out (red/green)
- [ ] Buttons have correct styling (outline vs destructive)

**User Experience**:
- [ ] Multi-step flow not confusing
- [ ] Back navigation intuitive
- [ ] Validation feedback immediate
- [ ] Loading states clear
- [ ] Success messages visible
- [ ] Error messages helpful

### Responsive Tests

**Mobile (375px)**:
- [ ] DangerZoneSection fits screen
- [ ] Text remains readable
- [ ] Buttons tappable (min 44px height)
- [ ] Dialogs fit screen without horizontal scroll
- [ ] Multi-step navigation works on small screen
- [ ] Form fields usable

**Tablet (768px)**:
- [ ] Layout adapts naturally
- [ ] Dialogs remain centered

**Desktop (1024px+)**:
- [ ] Container respects max-width
- [ ] Dialogs centered and readable
- [ ] No excessive whitespace

### Accessibility Tests

**Keyboard Navigation**:
- [ ] Tab key navigates through buttons
- [ ] Enter key activates buttons
- [ ] Escape key closes dialogs
- [ ] Focus indicators visible
- [ ] Form fields keyboard accessible

**Screen Reader**:
- [ ] Button purposes clear
- [ ] Dialog titles read correctly
- [ ] Warning messages announced
- [ ] Form labels associated with inputs
- [ ] Error messages announced

**ARIA Attributes**:
- [ ] Dialogs have proper aria-labels
- [ ] Buttons have descriptive text
- [ ] Form fields have aria-invalid when errors
- [ ] Error messages have aria-describedby

---

## Documentation Updates

### settings-components.md

Add the following section to `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/docs/components/settings-components.md` (after AppPreferencesSection):

```markdown
### DangerZoneSection

**Purpose**: Danger zone section providing destructive account actions with multi-step confirmation flows to prevent accidental data loss.

**Location**: `/src/components/settings/DangerZoneSection.tsx`

**Interface**:
```typescript
// No props - uses global auth context from useAuthStore
```

**Usage**:
```tsx
import { DangerZoneSection } from '@/components/settings/DangerZoneSection';

// In Settings page
<DangerZoneSection />
```

**Features**:
- Red danger styling (border, background, icons, text)
- Reset Progress action (clears learning data, keeps account)
- Delete Account action (deletes account and all data)
- Multi-step confirmation dialogs for both actions
- Password verification for account deletion
- Type-to-confirm patterns ("RESET", "DELETE")
- Loading states during operations
- Success/error notifications

**Visual Structure**:

1. **Reset Progress Action**:
   - AlertTriangle icon
   - Description: "Delete all deck progress, reviews, and statistics"
   - Warning: "Your account will remain active"
   - Button: "Reset All Progress" (red outline)
   - Opens ResetProgressDialog (2 steps)

2. **Delete Account Action**:
   - AlertTriangle icon
   - Description: "Permanently delete your account and all data"
   - Warning: "This action cannot be undone"
   - Button: "Delete Account" (red destructive)
   - Opens DeleteAccountDialog (3 steps)

**Integration**:
- Uses `useAuthStore` for logout on account deletion
- Uses `useDeckStore.resetProgress()` for clearing deck data
- Uses `useReviewStore.resetProgress()` for clearing review data
- Uses `useAnalyticsStore.clearAnalytics()` for clearing analytics
- Uses `useToast` for success/error notifications
- Uses `useNavigate` for redirects after actions

**Reset Progress Flow**:
- Step 1: Warning with list of deleted/preserved data
- Step 2: Type "RESET" to confirm (case-sensitive)
- On success: Clear learning data, redirect to dashboard

**Delete Account Flow**:
- Step 1: Warning with consequences list
- Step 2: Password verification
- Step 3: Type "DELETE" + checkbox acknowledgment
- On success: Delete account, logout, clear all data, redirect to home

**Security Patterns**:
- Multi-step confirmations prevent accidental clicks
- Password verification for account deletion
- Type-to-confirm requires explicit user action
- Clear warnings at each step
- No recovery option (immediate deletion in MVP)

**Dependencies**:
- `@/stores/authStore` - Logout method
- `@/stores/deckStore` - Reset progress method
- `@/stores/reviewStore` - Reset progress method
- `@/stores/analyticsStore` - Clear analytics method
- `@/hooks/use-toast` - Toast notifications
- `@/components/ui/card` - Card container
- `@/components/ui/button` - Action buttons
- `lucide-react` - AlertTriangle icon

**Responsive Behavior**:
- Mobile (< 768px): Full-width layout, dialogs fit screen
- Desktop (1024px+): Container respects max-width, dialogs centered

**Accessibility**:
- Keyboard navigation (Tab, Enter, Escape)
- ARIA labels on dialogs and buttons
- Screen reader announcements for warnings
- Focus management in multi-step dialogs

**Error Handling**:
- Wrong password: Inline error message
- Network errors: Destructive toast notification
- Validation errors: Real-time feedback
- Failed operations: Error toasts with retry option

---

### ResetProgressDialog

**Purpose**: 2-step confirmation dialog for resetting all learning progress while keeping account active.

**Location**: `/src/components/settings/ResetProgressDialog.tsx`

**Interface**:
```typescript
interface ResetProgressDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}
```

**Usage**:
```tsx
import { ResetProgressDialog } from '@/components/settings/ResetProgressDialog';

const [open, setOpen] = useState(false);

<ResetProgressDialog
  open={open}
  onOpenChange={setOpen}
/>
```

**Flow**:

**Step 1: Warning**
- Title: "Reset All Progress"
- Lists what will be deleted (bulleted)
- Lists what will be preserved (green box)
- Warning: "This action cannot be undone" (red box)
- Buttons: Cancel, Continue

**Step 2: Type-to-Confirm**
- Title: "Confirm Progress Reset"
- Text input: Must type "RESET" exactly (case-sensitive)
- Real-time validation feedback
- Success indicator when valid
- Buttons: Back, Reset My Progress

**On Success**:
- Clears deck progress
- Clears review history
- Clears analytics data
- Shows success toast
- Redirects to dashboard
- User remains logged in

**Styling**:
- Red warning theme
- AlertTriangle icon in title
- Green preserved data box for contrast
- Destructive button variant

---

### DeleteAccountDialog

**Purpose**: 3-step confirmation dialog for permanent account deletion with password verification.

**Location**: `/src/components/settings/DeleteAccountDialog.tsx`

**Interface**:
```typescript
interface DeleteAccountDialogProps {
  open: boolean;
  onOpenChange: (open: boolean) => void;
}
```

**Usage**:
```tsx
import { DeleteAccountDialog } from '@/components/settings/DeleteAccountDialog';

const [open, setOpen] = useState(false);

<DeleteAccountDialog
  open={open}
  onOpenChange={setOpen}
/>
```

**Flow**:

**Step 1: Warning**
- Title: "Delete Account"
- Lists all data that will be deleted (bulleted)
- Warning: "This action cannot be undone. There is no recovery option." (red box)
- Buttons: Cancel, Continue

**Step 2: Password Verification**
- Title: "Verify Your Identity"
- PasswordField: Current password required (min 8 chars)
- Validation: Password must be correct
- Error: "Incorrect password" if wrong
- Buttons: Back, Continue

**Step 3: Final Confirmation**
- Title: "Final Confirmation"
- Text input: Must type "DELETE" exactly (case-sensitive)
- Checkbox: "I understand this action cannot be undone"
- Real-time validation feedback
- Success indicator when both valid
- Buttons: Back, Delete My Account

**On Success**:
- Logs out user
- Clears all localStorage/sessionStorage
- Shows success toast
- Redirects to home page
- User cannot access protected routes

**Security**:
- Multi-step confirmation
- Password verification required
- Type-to-confirm pattern
- Explicit acknowledgment checkbox
- No recovery option (immediate deletion)

**Styling**:
- Red warning theme throughout
- AlertTriangle icon in titles
- Destructive button variant
- Loading state during deletion

---
```

---

## Success Criteria (Final Checklist)

### Implementation Complete

- [ ] DangerZoneSection.tsx component created (~120 lines)
- [ ] ResetProgressDialog.tsx component created (~200 lines)
- [ ] DeleteAccountDialog.tsx component created (~250 lines)
- [ ] index.ts barrel export updated
- [ ] settings.ts TypeScript interfaces updated
- [ ] Store reset methods added (deck, review) if needed
- [ ] Documentation updated in settings-components.md

### Functional Requirements

**Reset Progress**:
- [ ] Dialog opens with warning and preserved data lists
- [ ] Type-to-confirm validates "RESET" (case-sensitive)
- [ ] Back navigation works between steps
- [ ] Confirm button disabled until valid
- [ ] Progress reset clears deck, review, analytics data
- [ ] Account and preferences preserved
- [ ] Success toast displays
- [ ] User redirected to dashboard
- [ ] User remains logged in

**Delete Account**:
- [ ] Dialog opens with consequences list
- [ ] Password verification step validates password
- [ ] Password error shows for incorrect password
- [ ] Back navigation works between steps
- [ ] Type-to-confirm validates "DELETE" (case-sensitive)
- [ ] Checkbox required for final confirmation
- [ ] Confirm button disabled until all valid
- [ ] Account deletion logs out user
- [ ] All data cleared (localStorage, sessionStorage)
- [ ] Success toast displays
- [ ] User redirected to home page

**Visual Design**:
- [ ] Red danger styling throughout
- [ ] AlertTriangle icons visible
- [ ] Warning messages clear
- [ ] Proper color contrast
- [ ] Buttons have correct styling

### Quality Requirements

**TypeScript**:
- [ ] 0 TypeScript compilation errors
- [ ] All interfaces properly defined
- [ ] No `any` types

**Testing**:
- [ ] Reset Progress flow tested end-to-end
- [ ] Delete Account flow tested end-to-end
- [ ] Multi-step navigation tested
- [ ] Back buttons work correctly
- [ ] Validation tested (password, text inputs)
- [ ] Error handling tested
- [ ] Loading states verified

**Responsive Design**:
- [ ] Mobile (375px) tested and working
- [ ] Tablet (768px) tested and working
- [ ] Desktop (1024px+) tested and working
- [ ] No horizontal scroll at any breakpoint
- [ ] Dialogs fit mobile screens

**Accessibility**:
- [ ] Keyboard navigation works
- [ ] ARIA labels present
- [ ] Focus management correct
- [ ] Error messages announced

### Documentation

- [ ] settings-components.md updated with DangerZoneSection
- [ ] ResetProgressDialog documented
- [ ] DeleteAccountDialog documented
- [ ] Security patterns documented
- [ ] Multi-step flows explained

### Build Verification

- [ ] `npm run type-check` passes
- [ ] `npm run build` succeeds
- [ ] No console errors in browser
- [ ] No runtime warnings

---

## Notes for Executor

### Important Considerations

1. **Security**: Password verification for account deletion is simulated in MVP (mockAuthAPI). In production, this would call a backend API to verify the password before allowing deletion.

2. **Data Deletion**: Account deletion is immediate with no recovery window in MVP. In production, you'd typically implement a 30-day soft delete period.

3. **Store Reset Methods**: Check if deckStore and reviewStore have `resetProgress()` methods. If not, add them as shown in the implementation steps.

4. **Type-to-Confirm Pattern**: The "RESET" and "DELETE" validation is case-sensitive by design. This forces users to be explicit and prevents accidental confirmation.

5. **Multi-Step Flow**: Each dialog has multiple steps to give users multiple chances to reconsider. This is a UX best practice for destructive actions.

6. **Red Color Scheme**: The entire danger zone uses red styling (borders, backgrounds, text, icons) to create a strong visual warning that these actions are destructive.

### Common Pitfalls to Avoid

1. **Don't allow dialog close during operations**: The dialogs should prevent closing (via overlay click or Escape key) while deletion/reset is in progress.

2. **Reset dialog state on close**: When a dialog closes, reset all state (step, inputs, validation) to prevent stale data on reopen.

3. **Clear localStorage completely on account deletion**: Ensure ALL localStorage keys are cleared, not just auth data.

4. **Test the multi-step flow thoroughly**: Users should be able to navigate back and forth between steps without losing valid data.

5. **Validate case-sensitivity**: The "RESET" and "DELETE" inputs must match exactly (case-sensitive) - test this carefully.

### Next Steps After Task 08.03

After completing this task, you'll move to:

1. **Task 08.04**: Integration & Testing (verify all 3 sections work together on Settings page)

The DangerZoneSection completes the core functionality of the Settings page. Task 08.04 will integrate all sections and perform comprehensive testing.

---

## Dependencies on Other Tasks

### Required (Task 08.01 - Account Settings Section)

**Status**: COMPLETED

**Why Required**:
- Establishes the Settings page structure
- Demonstrates the Card-based section pattern
- Provides authStore integration example

**Patterns Used**:
- Card layout styling
- Section header pattern (icon + text)
- Multi-step dialog patterns

### Required (Task 08.02 - App Preferences Section)

**Status**: COMPLETED

**Why Required**:
- Establishes settings section patterns
- Shows store integration patterns
- Provides toast notification examples

### Required (Task 07 - UI Components)

**Status**: COMPLETED

**Components Used**:
- Dialog components (Dialog, DialogContent, DialogHeader, etc.)
- PasswordField component (for password verification)
- FormField component (for text inputs)
- Button component
- Card component
- Checkbox component
- Label component

### Required (Stores)

**Status**: Mostly complete, may need minor additions

**Stores Needed**:
- authStore: logout() method (exists)
- deckStore: resetProgress() method (may need to add)
- reviewStore: resetProgress() method (may need to add)
- analyticsStore: clearAnalytics() method (exists)

---

## Estimated Completion Time

**Total Duration**: 60 minutes

**Breakdown**:
- Create DangerZoneSection shell: 5 min
- Add Reset Progress UI: 7 min
- Add Delete Account UI: 7 min
- Create ResetProgressDialog: 20 min
- Create DeleteAccountDialog: 20 min
- Integration and store updates: 5 min
- Testing: 10 min
- Documentation: 3 min

**Note**: This estimate assumes familiarity with existing component patterns from Tasks 07, 08.01, and 08.02. The multi-step dialog implementations are the most time-consuming part.

---

## Final Notes

This task implements the most sensitive features in the Settings page - actions that permanently delete user data. The implementation prioritizes:

1. **Safety**: Multi-step confirmations with explicit user actions (type-to-confirm, password verification, checkboxes)
2. **Clarity**: Clear warnings at every step explaining exactly what will be deleted
3. **Visual Warnings**: Strong red color scheme throughout to signal danger
4. **User Control**: Back navigation allows users to reconsider at any step
5. **Professional UX**: Follows industry best practices for destructive actions

The danger zone demonstrates product maturity by handling sensitive operations responsibly while maintaining user autonomy. Upon completion, users will have secure, self-service capabilities for managing their account and data.

---

**End of Task 08.03 Document**
