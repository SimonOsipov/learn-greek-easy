# Task 07.09: Consolidate Loading State Components

**Status**: ðŸ“‹ **PLANNED** (OPTIONAL)
**Parent Task**: [Task 07 - UI Components](../07-ui-components.md)
**Track**: B - Refactoring (Optional)
**Priority**: Low
**Estimated Duration**: 60 minutes
**Dependencies**: None
**Deliverable**: Unified Loading component with variants

---

## Objective

Consolidate loading state patterns (skeletons, spinners, inline loaders) into a unified Loading component system.

---

## Current Loading Patterns

**Loading States in Use**:
1. Skeleton components (card, list, flashcard)
2. Page spinners (full page loading)
3. Inline loaders (loading data...)
4. Button loading states (spinner + disabled)

**Issues**: Inconsistent styling, duplicated code, no centralized loading management

---

## Components to Create

### 1. Loading Component

**File**: `/src/components/feedback/Loading.tsx`

**Variants**:
- `page` - Full page loading with centered spinner
- `inline` - Small inline loader with text
- `overlay` - Loading overlay on top of content
- `skeleton` - Skeleton placeholder

**Interface**:
```typescript
interface LoadingProps {
  variant?: 'page' | 'inline' | 'overlay' | 'skeleton';
  text?: string;
  rows?: number; // for skeleton variant
  className?: string;
}
```

**Implementation**:
```typescript
import { LoaderIcon } from 'lucide-react';
import { Skeleton } from '@/components/ui/skeleton';
import { cn } from '@/lib/utils';

export function Loading({
  variant = 'inline',
  text = 'Loading...',
  rows = 3,
  className
}: LoadingProps) {
  if (variant === 'page') {
    return (
      <div className={cn(
        'flex items-center justify-center min-h-[400px]',
        className
      )}>
        <div className="text-center space-y-4">
          <LoaderIcon className="h-8 w-8 animate-spin text-primary mx-auto" />
          <p className="text-muted">{text}</p>
        </div>
      </div>
    );
  }

  if (variant === 'inline') {
    return (
      <div className={cn('flex items-center gap-2 text-muted text-sm', className)}>
        <LoaderIcon className="h-4 w-4 animate-spin" />
        <span>{text}</span>
      </div>
    );
  }

  if (variant === 'overlay') {
    return (
      <div className={cn(
        'absolute inset-0 bg-white/80 flex items-center justify-center z-10',
        className
      )}>
        <LoaderIcon className="h-8 w-8 animate-spin text-primary" />
      </div>
    );
  }

  if (variant === 'skeleton') {
    return (
      <div className={cn('space-y-3', className)}>
        {Array.from({ length: rows }).map((_, i) => (
          <Skeleton key={i} className="h-4 w-full" />
        ))}
      </div>
    );
  }

  return null;
}
```

---

### 2. CardSkeleton Component

**File**: `/src/components/feedback/CardSkeleton.tsx`

**Implementation**:
```typescript
import { Skeleton } from '@/components/ui/skeleton';
import { Card } from '@/components/ui/card';

export function CardSkeleton() {
  return (
    <Card className="p-4">
      <div className="space-y-3">
        <Skeleton className="h-4 w-2/3" />
        <Skeleton className="h-3 w-full" />
        <Skeleton className="h-3 w-5/6" />
        <div className="flex gap-2 pt-2">
          <Skeleton className="h-8 w-20" />
          <Skeleton className="h-8 w-20" />
        </div>
      </div>
    </Card>
  );
}
```

---

### 3. ListSkeleton Component

**File**: `/src/components/feedback/ListSkeleton.tsx`

**Implementation**:
```typescript
import { Skeleton } from '@/components/ui/skeleton';

interface ListSkeletonProps {
  count?: number;
  showAvatar?: boolean;
}

export function ListSkeleton({ count = 3, showAvatar = true }: ListSkeletonProps) {
  return (
    <div className="space-y-4">
      {Array.from({ length: count }).map((_, i) => (
        <div key={i} className="flex items-center gap-4">
          {showAvatar && <Skeleton className="h-12 w-12 rounded-full" />}
          <div className="flex-1 space-y-2">
            <Skeleton className="h-4 w-1/2" />
            <Skeleton className="h-3 w-3/4" />
          </div>
        </div>
      ))}
    </div>
  );
}
```

---

## Implementation Steps

1. Create Loading component (20 min)
2. Create CardSkeleton component (10 min)
3. Create ListSkeleton component (10 min)
4. Replace loading states in Dashboard (10 min)
5. Replace loading states in DecksPage (10 min)

---

## Success Criteria

- [ ] Loading component with 4 variants created
- [ ] CardSkeleton component created
- [ ] ListSkeleton component created
- [ ] All loading states use new components
- [ ] Consistent loading UX across app
- [ ] Documented in Components-Reference.md

---

## Time Breakdown

| Activity | Duration |
|----------|----------|
| Create Loading component | 20 min |
| Create CardSkeleton | 10 min |
| Create ListSkeleton | 10 min |
| Replace Dashboard loading states | 10 min |
| Replace DecksPage loading states | 10 min |
| **TOTAL** | **60 min** |
