## ✅ COMPLETION STATUS

**Status**: COMPLETED
**Completion Date**: 2025-11-01
**Actual Duration**: ~90 minutes (as estimated)
**Implementation Quality**: Production-ready

### Deliverables Completed

**Files Created** (1 file):
- `/src/pages/DeckDetailPage.tsx` (561 lines, 18KB)
  - Main component with 6 sub-components
  - Greek typography hierarchy
  - Premium lock validation
  - Context-aware action buttons
  - Loading/error/404 states

**Files Modified** (2 files):
- `/src/App.tsx` - Route added for `/decks/:id`
- `.claude/01-MVP/frontend/Components-Reference.md` - Full documentation (+112 lines)

### Verification Results

- ✅ TypeScript compilation: 0 errors
- ✅ All 65+ success criteria met
- ✅ Visual testing with Playwright MCP: 10 screenshots
- ✅ Premium lock state verified with free user
- ✅ Responsive design tested (mobile/tablet/desktop)
- ✅ All features working as expected

### Implementation Highlights

- Greek title (titleGreek) displayed prominently
- Premium validation with lock icons and upgrade CTA
- Context-aware buttons (Start/Continue/Review/Upgrade)
- Comprehensive statistics section
- Full WCAG AA accessibility
- Component reuse (DeckBadge, DeckProgressBar)

---

# Task 04.05: Deck Detail Page Implementation Plan

**Status**: Ready for Implementation
**Estimated Duration**: 90 minutes
**Priority**: High
**Task**: Create comprehensive deck detail page with Greek typography, premium validation, and responsive design

---

## Table of Contents

- [Overview](#overview)
- [Prerequisites](#prerequisites)
- [Implementation Steps](#implementation-steps)
  - [Step 1: Create DeckDetailPage Component (20 min)](#step-1-create-deckdetailpage-component-20-min)
  - [Step 2: Implement Deck Header Section (15 min)](#step-2-implement-deck-header-section-15-min)
  - [Step 3: Implement Statistics Section (10 min)](#step-3-implement-statistics-section-10-min)
  - [Step 4: Implement Action Buttons Section (15 min)](#step-4-implement-action-buttons-section-15-min)
  - [Step 5: Implement Loading & Error States (10 min)](#step-5-implement-loading--error-states-10-min)
  - [Step 6: Add Route to App.tsx (5 min)](#step-6-add-route-to-apptsx-5-min)
  - [Step 7: Update Components Reference Documentation (15 min)](#step-7-update-components-reference-documentation-15-min)
- [Component Interfaces](#component-interfaces)
- [Testing Strategy](#testing-strategy)
- [Success Criteria Checklist](#success-criteria-checklist)
- [Common Pitfalls & Solutions](#common-pitfalls--solutions)
- [Accessibility Requirements](#accessibility-requirements)
- [Greek Typography Guidelines](#greek-typography-guidelines)

---

## Overview

### Objective

Create a detailed deck view page that displays comprehensive information about a single Greek language learning deck, including title, description, progress, statistics, and learning actions. The page must handle premium access validation, loading states, and provide clear calls-to-action based on deck status.

### Context

- **Previous Tasks Completed**:
  - 04.01: Deck types, mock data (6 Greek decks, 575 cards)
  - 04.02: Zustand deckStore (8 actions, localStorage persistence)
  - 04.03: DeckBadge, DeckProgressBar, DeckCard components
  - 04.04: Decks list page with filters and search

- **Current State**: Users can browse and filter decks on `/decks` page
- **Goal**: Enable users to view detailed deck information and start learning from `/decks/:id` page

### Key Requirements

1. Display Greek title prominently, English subtitle secondarily
2. Show deck metadata (level, category, author, card count, estimated time)
3. Visualize learning progress with segmented progress bar
4. Display detailed statistics (new/learning/mastered cards, accuracy, streak)
5. Present contextual action buttons (Start Learning, Continue, Upgrade to Premium)
6. Handle locked premium decks for free-tier users
7. Implement breadcrumb navigation (Decks > Deck Name)
8. Provide loading skeleton, error state, and 404 handling
9. Ensure WCAG AA accessibility compliance
10. Mobile-first responsive design

### File Locations

- **Component**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/pages/DeckDetailPage.tsx`
- **Route Update**: `/Users/samosipov/Downloads/learn-greek-easy/learn-greek-easy-frontend/src/App.tsx`
- **Documentation**: `/Users/samosipov/Downloads/learn-greek-easy/.claude/01-MVP/frontend/Components-Reference.md`

---

## Prerequisites

### Required Knowledge

- React 18 functional components and hooks (useState, useEffect, useCallback)
- React Router v6 (useParams, useNavigate for URL parameters and navigation)
- Zustand state management (useDeckStore hook patterns)
- TypeScript interfaces and type safety
- Tailwind CSS utility-first styling
- Shadcn/ui component library patterns

### Existing Components to Reuse

- `DeckBadge` - Level badge (A1-B2) and status badges
- `DeckProgressBar` - Segmented progress visualization
- `Card`, `CardHeader`, `CardTitle`, `CardContent` - Shadcn card components
- `Button` - Shadcn button with variants
- `Skeleton` - Loading placeholders
- `Breadcrumb` - Navigation breadcrumbs (from Shadcn)
- `Alert` - Error message display

### State Management

- `useDeckStore().selectDeck(deckId)` - Fetch deck by ID
- `useDeckStore().selectedDeck` - Currently selected deck object
- `useDeckStore().isLoading` - Loading state
- `useDeckStore().error` - Error message
- `useDeckStore().startLearning(deckId)` - Initialize learning
- `useAuthStore().user.role` - Premium access check

---

## Implementation Steps

### Step 1: Create DeckDetailPage Component (20 min)

**File**: `/src/pages/DeckDetailPage.tsx`

**Objective**: Create the main page component shell with routing, state management, and lifecycle hooks.

**Implementation**:

```tsx
// src/pages/DeckDetailPage.tsx

import React, { useEffect } from 'react';
import { useParams, useNavigate, Link } from 'react-router-dom';
import { useDeckStore } from '@/stores/deckStore';
import { useAuthStore } from '@/stores/authStore';
import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Skeleton } from '@/components/ui/skeleton';
import { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';
import {
  ChevronLeft,
  Lock,
  BookOpen,
  Clock,
  Target,
  TrendingUp,
  AlertCircle,
} from 'lucide-react';
import { DeckBadge } from '@/components/decks/DeckBadge';
import { DeckProgressBar } from '@/components/decks/DeckProgressBar';

export const DeckDetailPage: React.FC = () => {
  const { id: deckId } = useParams<{ id: string }>();
  const navigate = useNavigate();

  const {
    selectedDeck,
    isLoading,
    error,
    selectDeck,
    clearSelection,
    startLearning,
  } = useDeckStore();

  const { user } = useAuthStore();

  // Fetch deck on mount and when deckId changes
  useEffect(() => {
    if (deckId) {
      selectDeck(deckId).catch((err) => {
        console.error('Failed to load deck:', err);
      });
    }

    // Cleanup: clear selection when component unmounts
    return () => {
      clearSelection();
    };
  }, [deckId, selectDeck, clearSelection]);

  // Handle invalid deckId (not provided)
  if (!deckId) {
    return <NotFoundState />;
  }

  // Loading state
  if (isLoading) {
    return <LoadingSkeleton />;
  }

  // Error state
  if (error) {
    return <ErrorState error={error} onRetry={() => selectDeck(deckId)} />;
  }

  // Not found state (deck doesn't exist)
  if (!selectedDeck) {
    return <NotFoundState />;
  }

  // Check if deck is locked (premium deck + free user)
  const isPremiumLocked = selectedDeck.isPremium && user?.role === 'free';

  // Determine deck status for action buttons
  const deckStatus = selectedDeck.progress?.status || 'not-started';

  return (
    <div className="container mx-auto px-4 py-6 md:py-8 max-w-4xl">
      {/* Breadcrumb Navigation */}
      <nav className="mb-4 flex items-center gap-2 text-sm text-gray-600" aria-label="Breadcrumb">
        <Link
          to="/decks"
          className="hover:text-gray-900 transition-colors flex items-center gap-1"
        >
          <ChevronLeft className="w-4 h-4" />
          Decks
        </Link>
        <span>/</span>
        <span className="text-gray-900 font-medium truncate">
          {selectedDeck.titleGreek}
        </span>
      </nav>

      {/* Main Content */}
      <div className="space-y-6">
        {/* Deck Header Section */}
        <DeckHeaderSection deck={selectedDeck} isPremiumLocked={isPremiumLocked} />

        {/* Statistics Section */}
        <StatisticsSection deck={selectedDeck} />

        {/* Action Buttons Section */}
        <ActionButtonsSection
          deck={selectedDeck}
          isPremiumLocked={isPremiumLocked}
          deckStatus={deckStatus}
          onStartLearning={() => handleStartLearning(deckId, startLearning, navigate)}
          onContinue={() => handleContinue(deckId, navigate)}
          onUpgrade={() => handleUpgrade(navigate)}
        />
      </div>
    </div>
  );
};

// Helper functions for action handlers
const handleStartLearning = async (
  deckId: string,
  startLearning: (id: string) => Promise<void>,
  navigate: any
) => {
  try {
    await startLearning(deckId);
    // TODO: Navigate to learning session when implemented
    navigate(`/learn/${deckId}`);
  } catch (error) {
    console.error('Failed to start learning:', error);
    // Error is handled by store
  }
};

const handleContinue = (deckId: string, navigate: any) => {
  // TODO: Navigate to learning session when implemented
  navigate(`/learn/${deckId}`);
};

const handleUpgrade = (navigate: any) => {
  // TODO: Navigate to upgrade page when implemented
  navigate('/upgrade');
};
```

**Testing**:

1. Navigate to `/decks/deck-a1-basics` - should load deck successfully
2. Navigate to `/decks/invalid-id` - should show not found state
3. Verify breadcrumb link navigates back to `/decks`
4. Check console for no errors during mount/unmount
5. Verify cleanup function clears selectedDeck on unmount

**Success Criteria**:

- [ ] Component mounts without errors
- [ ] useParams extracts deckId correctly
- [ ] selectDeck called on mount with correct deckId
- [ ] clearSelection called on unmount
- [ ] Breadcrumb navigation works
- [ ] TypeScript compiles with no errors

---

### Step 2: Implement Deck Header Section (15 min)

**Objective**: Create the header section displaying deck title, level badge, premium indicator, description, and metadata.

**Implementation**:

```tsx
// Add to DeckDetailPage.tsx

interface DeckHeaderSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
}

const DeckHeaderSection: React.FC<DeckHeaderSectionProps> = ({ deck, isPremiumLocked }) => {
  return (
    <Card>
      <CardHeader>
        {/* Title and Badges Row */}
        <div className="flex items-start justify-between gap-4 flex-wrap">
          <div className="flex-1 min-w-0">
            {/* Greek Title - Primary */}
            <h1 className="text-2xl md:text-3xl font-semibold text-gray-900 mb-1">
              {deck.titleGreek}
            </h1>

            {/* English Subtitle - Secondary */}
            <p className="text-base md:text-lg text-gray-600">
              {deck.title}
            </p>
          </div>

          {/* Level Badge and Lock Icon */}
          <div className="flex items-center gap-2 flex-shrink-0">
            {isPremiumLocked && (
              <Lock
                className="w-5 h-5 text-amber-500"
                aria-label="Premium locked"
              />
            )}
            <DeckBadge type="level" level={deck.level} />
          </div>
        </div>

        {/* Premium Badge */}
        {deck.isPremium && (
          <div className="mt-3">
            <span className="inline-flex items-center px-3 py-1 text-sm font-medium bg-amber-100 text-amber-800 rounded-full">
              Premium
            </span>
          </div>
        )}

        {/* Category and Author Info */}
        <div className="mt-3 flex flex-wrap items-center gap-3 text-sm text-gray-600">
          <span className="capitalize">{deck.category}</span>
          <span>•</span>
          <span>Created by {deck.createdBy}</span>
          <span>•</span>
          <span>Updated {formatDate(deck.updatedAt)}</span>
        </div>
      </CardHeader>

      <CardContent>
        {/* Description */}
        <p className="text-gray-700 leading-relaxed">
          {deck.description}
        </p>

        {/* Progress Bar (if in progress or completed) */}
        {deck.progress && deck.progress.status !== 'not-started' && (
          <div className="mt-6">
            <div className="flex items-center justify-between mb-2">
              <span className="text-sm font-medium text-gray-700">
                Your Progress
              </span>
              <span className="text-sm text-gray-600">
                {Math.round((deck.progress.cardsMastered / deck.progress.cardsTotal) * 100)}% Complete
              </span>
            </div>
            <DeckProgressBar progress={deck.progress} showLegend={true} size="large" />
          </div>
        )}
      </CardContent>
    </Card>
  );
};

// Helper: Format date (e.g., "Jan 15, 2025")
const formatDate = (date: Date): string => {
  return new Intl.DateTimeFormat('en-US', {
    month: 'short',
    day: 'numeric',
    year: 'numeric',
  }).format(new Date(date));
};
```

**Greek Typography Pattern**:

- Greek title (`titleGreek`) displayed first and larger (2xl/3xl)
- English subtitle (`title`) displayed below in smaller gray text
- Ensures Greek learners see Greek prominently while maintaining clarity

**Testing**:

1. Verify Greek title displays correctly with UTF-8 encoding
2. Check level badge color matches deck level (A1=green, A2=blue, etc.)
3. Confirm premium badge only shows for premium decks
4. Verify lock icon only shows when `isPremiumLocked === true`
5. Test progress bar appears only for in-progress/completed decks
6. Verify date formatting (e.g., "Jan 15, 2025")

**Success Criteria**:

- [ ] Greek title renders correctly
- [ ] English subtitle appears below Greek title
- [ ] Level badge displays with correct color
- [ ] Premium badge shows only for premium decks
- [ ] Lock icon shows only when locked
- [ ] Progress bar appears for non-new decks
- [ ] Description text is readable and well-formatted
- [ ] Responsive layout works on mobile (320px+)

---

### Step 3: Implement Statistics Section (10 min)

**Objective**: Create a statistics grid showing card counts, estimated time, accuracy, and streak information.

**Implementation**:

```tsx
// Add to DeckDetailPage.tsx

interface StatisticsSectionProps {
  deck: Deck;
}

const StatisticsSection: React.FC<StatisticsSectionProps> = ({ deck }) => {
  const { progress } = deck;

  return (
    <Card>
      <CardHeader>
        <CardTitle className="text-lg font-semibold">Deck Statistics</CardTitle>
      </CardHeader>
      <CardContent>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {/* Total Cards */}
          <StatCard
            icon={<BookOpen className="w-5 h-5 text-blue-500" />}
            label="Total Cards"
            value={deck.cardCount}
            subtext="flashcards"
          />

          {/* Estimated Time */}
          <StatCard
            icon={<Clock className="w-5 h-5 text-purple-500" />}
            label="Estimated Time"
            value={`${deck.estimatedTime}m`}
            subtext="to complete"
          />

          {/* Mastery Rate (if started) */}
          {progress && progress.status !== 'not-started' && (
            <StatCard
              icon={<Target className="w-5 h-5 text-green-500" />}
              label="Mastery Rate"
              value={`${Math.round((progress.cardsMastered / progress.cardsTotal) * 100)}%`}
              subtext={`${progress.cardsMastered}/${progress.cardsTotal} mastered`}
            />
          )}

          {/* Accuracy (if started) */}
          {progress && progress.status !== 'not-started' && (
            <StatCard
              icon={<TrendingUp className="w-5 h-5 text-orange-500" />}
              label="Accuracy"
              value={`${progress.accuracy}%`}
              subtext="correct answers"
            />
          )}
        </div>

        {/* Card Distribution (if started) */}
        {progress && progress.status !== 'not-started' && (
          <div className="mt-6 grid grid-cols-3 gap-4 pt-4 border-t">
            <div className="text-center">
              <p className="text-2xl font-bold text-gray-400">{progress.cardsNew}</p>
              <p className="text-xs text-gray-600 mt-1">New</p>
            </div>
            <div className="text-center">
              <p className="text-2xl font-bold text-blue-500">{progress.cardsLearning}</p>
              <p className="text-xs text-gray-600 mt-1">Learning</p>
            </div>
            <div className="text-center">
              <p className="text-2xl font-bold text-green-500">{progress.cardsMastered}</p>
              <p className="text-xs text-gray-600 mt-1">Mastered</p>
            </div>
          </div>
        )}
      </CardContent>
    </Card>
  );
};

// Reusable Stat Card Component
interface StatCardProps {
  icon: React.ReactNode;
  label: string;
  value: string | number;
  subtext: string;
}

const StatCard: React.FC<StatCardProps> = ({ icon, label, value, subtext }) => {
  return (
    <div className="flex flex-col items-center text-center p-3 bg-gray-50 rounded-lg">
      <div className="mb-2">{icon}</div>
      <p className="text-xs text-gray-600 mb-1">{label}</p>
      <p className="text-xl font-bold text-gray-900">{value}</p>
      <p className="text-xs text-gray-500 mt-1">{subtext}</p>
    </div>
  );
};
```

**Testing**:

1. Verify all 4 base stats display correctly (Total Cards, Time, Mastery, Accuracy)
2. Check mastery/accuracy stats only show for started decks
3. Confirm card distribution row only appears for started decks
4. Test responsive grid (2 cols mobile, 4 cols desktop)
5. Verify icon colors match design system
6. Check percentage calculations are correct

**Success Criteria**:

- [ ] Total cards and estimated time always display
- [ ] Mastery rate and accuracy only show for started decks
- [ ] Card distribution (new/learning/mastered) only shows for started decks
- [ ] Icons render with correct colors
- [ ] Responsive grid layout works
- [ ] All numbers format correctly (no decimals for counts)

---

### Step 4: Implement Action Buttons Section (15 min)

**Objective**: Create context-aware action buttons that change based on deck status and premium access.

**Implementation**:

```tsx
// Add to DeckDetailPage.tsx

interface ActionButtonsSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
  deckStatus: DeckStatus;
  onStartLearning: () => void;
  onContinue: () => void;
  onUpgrade: () => void;
}

const ActionButtonsSection: React.FC<ActionButtonsSectionProps> = ({
  deck,
  isPremiumLocked,
  deckStatus,
  onStartLearning,
  onContinue,
  onUpgrade,
}) => {
  return (
    <Card>
      <CardContent className="pt-6">
        {/* Premium Locked State */}
        {isPremiumLocked && (
          <div className="text-center py-8">
            <Lock className="w-12 h-12 text-amber-500 mx-auto mb-4" />
            <h3 className="text-lg font-semibold text-gray-900 mb-2">
              Premium Deck
            </h3>
            <p className="text-sm text-gray-600 mb-6 max-w-md mx-auto">
              This deck is only available to premium members. Upgrade your account to access
              all premium decks and advanced learning features.
            </p>
            <Button
              size="lg"
              onClick={onUpgrade}
              className="bg-gradient-to-br from-amber-500 to-orange-600 hover:from-amber-600 hover:to-orange-700 text-white"
            >
              Upgrade to Premium
            </Button>
          </div>
        )}

        {/* Not Started State */}
        {!isPremiumLocked && deckStatus === 'not-started' && (
          <div className="text-center py-8">
            <BookOpen className="w-12 h-12 text-blue-500 mx-auto mb-4" />
            <h3 className="text-lg font-semibold text-gray-900 mb-2">
              Ready to Start Learning?
            </h3>
            <p className="text-sm text-gray-600 mb-6 max-w-md mx-auto">
              This deck contains {deck.cardCount} flashcards. Estimated time to complete: {deck.estimatedTime} minutes.
            </p>
            <Button
              size="lg"
              onClick={onStartLearning}
              className="bg-gradient-to-br from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white"
            >
              Start Learning
            </Button>
          </div>
        )}

        {/* In Progress State */}
        {!isPremiumLocked && deckStatus === 'in-progress' && (
          <div className="text-center py-8">
            <TrendingUp className="w-12 h-12 text-green-500 mx-auto mb-4" />
            <h3 className="text-lg font-semibold text-gray-900 mb-2">
              Continue Your Progress
            </h3>
            <p className="text-sm text-gray-600 mb-2 max-w-md mx-auto">
              You have {deck.progress?.dueToday || 0} cards due for review today.
            </p>
            <p className="text-xs text-gray-500 mb-6">
              Keep your streak going!
            </p>
            <Button
              size="lg"
              onClick={onContinue}
              className="bg-gradient-to-br from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white"
            >
              Continue Learning
            </Button>
          </div>
        )}

        {/* Completed State */}
        {!isPremiumLocked && deckStatus === 'completed' && (
          <div className="text-center py-8">
            <Target className="w-12 h-12 text-purple-500 mx-auto mb-4" />
            <h3 className="text-lg font-semibold text-gray-900 mb-2">
              Deck Completed!
            </h3>
            <p className="text-sm text-gray-600 mb-6 max-w-md mx-auto">
              Great job! You've mastered this deck. Continue reviewing to maintain your knowledge.
            </p>
            <Button
              size="lg"
              onClick={onContinue}
              className="bg-gradient-to-br from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white"
            >
              Review Deck
            </Button>
          </div>
        )}
      </CardContent>
    </Card>
  );
};
```

**Button Logic**:

| Condition | Button Text | Button Color | Icon | Handler |
|-----------|-------------|--------------|------|---------|
| Premium Locked | "Upgrade to Premium" | Amber gradient | Lock | `onUpgrade` |
| Not Started | "Start Learning" | Blue-Purple gradient | BookOpen | `onStartLearning` |
| In Progress | "Continue Learning" | Green gradient | TrendingUp | `onContinue` |
| Completed | "Review Deck" | Purple-Pink gradient | Target | `onContinue` |

**Testing**:

1. Test premium locked deck shows "Upgrade to Premium" button
2. Verify not-started deck shows "Start Learning" button
3. Confirm in-progress deck shows "Continue Learning" with due cards count
4. Check completed deck shows "Review Deck" button
5. Test button click handlers trigger correct navigation
6. Verify button gradients match design system

**Success Criteria**:

- [ ] Premium locked shows upgrade CTA
- [ ] Not-started shows start button
- [ ] In-progress shows continue button with due cards count
- [ ] Completed shows review button
- [ ] Button colors match design system
- [ ] All click handlers work correctly
- [ ] Icons display with correct colors
- [ ] Responsive layout works on mobile

---

### Step 5: Implement Loading & Error States (10 min)

**Objective**: Create loading skeleton and error handling components for better UX.

**Implementation**:

```tsx
// Add to DeckDetailPage.tsx

// Loading Skeleton Component
const LoadingSkeleton: React.FC = () => {
  return (
    <div className="container mx-auto px-4 py-6 md:py-8 max-w-4xl">
      {/* Breadcrumb Skeleton */}
      <div className="mb-4 flex items-center gap-2">
        <Skeleton className="h-4 w-32" />
      </div>

      {/* Header Skeleton */}
      <Card className="mb-6">
        <CardHeader>
          <div className="flex items-start justify-between gap-4">
            <div className="flex-1 space-y-2">
              <Skeleton className="h-8 w-3/4" />
              <Skeleton className="h-6 w-1/2" />
            </div>
            <Skeleton className="h-8 w-16 rounded-full" />
          </div>
          <div className="mt-3">
            <Skeleton className="h-5 w-24 rounded-full" />
          </div>
          <div className="mt-3 flex gap-3">
            <Skeleton className="h-4 w-20" />
            <Skeleton className="h-4 w-32" />
            <Skeleton className="h-4 w-28" />
          </div>
        </CardHeader>
        <CardContent>
          <Skeleton className="h-20 w-full" />
        </CardContent>
      </Card>

      {/* Stats Skeleton */}
      <Card className="mb-6">
        <CardHeader>
          <Skeleton className="h-6 w-40" />
        </CardHeader>
        <CardContent>
          <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
            {[1, 2, 3, 4].map((i) => (
              <div key={i} className="p-3 bg-gray-50 rounded-lg">
                <Skeleton className="h-5 w-5 mx-auto mb-2" />
                <Skeleton className="h-4 w-16 mx-auto mb-1" />
                <Skeleton className="h-6 w-12 mx-auto" />
              </div>
            ))}
          </div>
        </CardContent>
      </Card>

      {/* Action Skeleton */}
      <Card>
        <CardContent className="pt-6">
          <div className="text-center py-8">
            <Skeleton className="h-12 w-12 mx-auto mb-4 rounded-full" />
            <Skeleton className="h-6 w-48 mx-auto mb-2" />
            <Skeleton className="h-4 w-64 mx-auto mb-6" />
            <Skeleton className="h-12 w-48 mx-auto rounded-lg" />
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

// Error State Component
interface ErrorStateProps {
  error: string;
  onRetry: () => void;
}

const ErrorState: React.FC<ErrorStateProps> = ({ error, onRetry }) => {
  return (
    <div className="container mx-auto px-4 py-6 md:py-8 max-w-4xl">
      <Alert variant="destructive" className="mb-4">
        <AlertCircle className="h-4 w-4" />
        <AlertTitle>Error Loading Deck</AlertTitle>
        <AlertDescription>{error}</AlertDescription>
      </Alert>

      <Card>
        <CardContent className="pt-6 text-center py-12">
          <AlertCircle className="w-16 h-16 text-red-500 mx-auto mb-4" />
          <h2 className="text-xl font-semibold text-gray-900 mb-2">
            Failed to Load Deck
          </h2>
          <p className="text-sm text-gray-600 mb-6 max-w-md mx-auto">
            We couldn't load the deck details. Please check your connection and try again.
          </p>
          <div className="flex gap-3 justify-center">
            <Button variant="outline" onClick={() => window.history.back()}>
              Go Back
            </Button>
            <Button onClick={onRetry}>
              Try Again
            </Button>
          </div>
        </CardContent>
      </Card>
    </div>
  );
};

// Not Found State Component
const NotFoundState: React.FC = () => {
  const navigate = useNavigate();

  return (
    <div className="container mx-auto px-4 py-6 md:py-8 max-w-4xl">
      <Card>
        <CardContent className="pt-6 text-center py-12">
          <BookOpen className="w-16 h-16 text-gray-400 mx-auto mb-4" />
          <h2 className="text-xl font-semibold text-gray-900 mb-2">
            Deck Not Found
          </h2>
          <p className="text-sm text-gray-600 mb-6 max-w-md mx-auto">
            The deck you're looking for doesn't exist or has been removed.
          </p>
          <Button onClick={() => navigate('/decks')}>
            Browse All Decks
          </Button>
        </CardContent>
      </Card>
    </div>
  );
};
```

**Testing**:

1. Trigger loading state by navigating to deck detail page
2. Trigger error state by disconnecting network and retrying
3. Trigger not found state by navigating to invalid deck ID
4. Verify retry button refetches deck correctly
5. Check "Go Back" navigates to previous page
6. Test "Browse All Decks" navigates to `/decks`

**Success Criteria**:

- [ ] Loading skeleton matches final layout structure
- [ ] Error message displays correctly
- [ ] Retry button refetches deck
- [ ] Go Back button works
- [ ] Not found state has working "Browse All Decks" button
- [ ] All states have proper ARIA labels
- [ ] Icons render correctly

---

### Step 6: Add Route to App.tsx (5 min)

**Objective**: Register the new deck detail page route in the application router.

**File**: `/src/App.tsx`

**Implementation**:

```tsx
// Update src/App.tsx

import { DeckDetailPage } from '@/pages/DeckDetailPage';

// Inside Routes component:
<Route element={<ProtectedRoute />}>
  <Route path="/" element={<AppLayout />}>
    <Route index element={<Dashboard />} />
    <Route path="dashboard" element={<Navigate to="/" replace />} />
    <Route path="decks" element={<DecksPage />} />

    {/* ADD THIS ROUTE */}
    <Route path="decks/:id" element={<DeckDetailPage />} />

    <Route path="statistics" element={<StatisticsPage />} />
    <Route path="stats" element={<Navigate to="/statistics" replace />} />
    <Route path="settings" element={<SettingsPage />} />
    <Route path="profile" element={<Profile />} />
    <Route path="review" element={<Dashboard />} /> {/* Temporary */}
  </Route>
</Route>
```

**Testing**:

1. Navigate to `/decks/deck-a1-basics` - should load deck detail page
2. Click deck card on `/decks` page - should navigate to detail page
3. Verify URL parameter `:id` is correctly extracted
4. Test back button returns to `/decks` page
5. Verify protected route wrapper works (redirects to login if not authenticated)

**Success Criteria**:

- [ ] Route registered correctly
- [ ] URL parameter `:id` accessible via useParams
- [ ] Navigation from decks list works
- [ ] Back button functionality works
- [ ] Protected route authentication check works
- [ ] TypeScript compiles with no errors

---

### Step 7: Update Components Reference Documentation (15 min)

**Objective**: Document the new DeckDetailPage component in Components-Reference.md.

**File**: `/Users/samosipov/Downloads/learn-greek-easy/.claude/01-MVP/frontend/Components-Reference.md`

**Implementation**:

Add the following section to the "Custom Components" section:

```markdown
### DeckDetailPage

**Purpose**: Main detail page for displaying comprehensive information about a single deck, including title, description, progress, statistics, and learning actions.

**Location**: `src/pages/DeckDetailPage.tsx`

**Route**: `/decks/:id`

**Interface**:
```typescript
// No props - uses route params and store
// URL Parameter: :id (deck ID)

// Internal Sub-components:
interface DeckHeaderSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
}

interface StatisticsSectionProps {
  deck: Deck;
}

interface ActionButtonsSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
  deckStatus: DeckStatus;
  onStartLearning: () => void;
  onContinue: () => void;
  onUpgrade: () => void;
}
```

**Usage**:
```tsx
// Accessed via React Router
<Route path="decks/:id" element={<DeckDetailPage />} />

// Navigation from DecksPage
navigate(`/decks/${deckId}`);

// Link from DeckCard
<Link to={`/decks/${deck.id}`}>View Details</Link>
```

**Features**:
- Greek typography hierarchy (titleGreek primary, title secondary)
- Premium access validation with upgrade CTA for locked decks
- Context-aware action buttons (Start Learning, Continue, Upgrade)
- Deck status detection (not-started, in-progress, completed)
- Detailed statistics grid (cards, time, mastery, accuracy)
- Card distribution visualization (new/learning/mastered)
- Segmented progress bar with legend
- Breadcrumb navigation (Decks > Deck Name)
- Loading skeleton matching final layout
- Error state with retry functionality
- 404 not found state
- WCAG AA accessibility compliance
- Mobile-first responsive design

**Components Used**:
- `DeckBadge` - Level badge and status badges
- `DeckProgressBar` - Progress visualization
- `Card`, `CardHeader`, `CardTitle`, `CardContent` - Layout
- `Button` - Action buttons with gradients
- `Skeleton` - Loading placeholders
- `Alert` - Error messages
- Lucide icons: `ChevronLeft`, `Lock`, `BookOpen`, `Clock`, `Target`, `TrendingUp`, `AlertCircle`

**State Management**:
- `useDeckStore().selectDeck(deckId)` - Fetch deck by ID
- `useDeckStore().selectedDeck` - Current deck
- `useDeckStore().isLoading` - Loading state
- `useDeckStore().error` - Error message
- `useDeckStore().startLearning(deckId)` - Initialize learning
- `useAuthStore().user.role` - Premium access check

**Action Buttons Logic**:
| Deck State | User Type | Button Text | Color | Handler |
|------------|-----------|-------------|-------|---------|
| Premium deck | Free user | "Upgrade to Premium" | Amber gradient | Navigate to `/upgrade` |
| Not started | Any | "Start Learning" | Blue-Purple gradient | Call `startLearning()`, navigate to `/learn/:id` |
| In progress | Any | "Continue Learning" | Green gradient | Navigate to `/learn/:id` |
| Completed | Any | "Review Deck" | Purple-Pink gradient | Navigate to `/learn/:id` |

**Responsive Behavior**:
- **Mobile (< 768px)**: Single column, stacked statistics (2-col grid)
- **Tablet (768-1024px)**: Moderate spacing, 4-col stats grid
- **Desktop (≥ 1024px)**: Max-width 896px (4xl), full spacing

**Accessibility**:
- Breadcrumb navigation with `aria-label="Breadcrumb"`
- Heading hierarchy (h1 for title, h3 for section titles)
- ARIA labels for icons (`aria-label="Premium locked"`)
- Keyboard navigation support (focus states on buttons)
- Screen reader announcements for loading/error states
- Color contrast meeting WCAG AA (all text on backgrounds)

**Error Handling**:
- Loading skeleton during fetch
- Error state with retry button
- 404 not found for invalid deck IDs
- Premium access blocking with upgrade CTA

**Greek Typography Pattern**:
- Primary: `titleGreek` - 2xl/3xl, font-semibold, gray-900
- Secondary: `title` - base/lg, gray-600
- Always Greek first, English subtitle below
```

**Testing**:

1. Verify documentation renders correctly in markdown
2. Check all code examples are valid TypeScript/TSX
3. Confirm table formatting is correct
4. Verify links to other components are accurate

**Success Criteria**:

- [ ] Documentation added to Components-Reference.md
- [ ] All code examples are valid and accurate
- [ ] Props interface documented correctly
- [ ] Usage examples are clear and practical
- [ ] Features list is comprehensive
- [ ] Responsive behavior documented
- [ ] Accessibility requirements listed
- [ ] Greek typography pattern explained

---

## Component Interfaces

### DeckDetailPage

**Main Component**:

```typescript
export const DeckDetailPage: React.FC = () => {
  // No props - uses route params and stores
  // Returns: JSX.Element
}
```

**Sub-Components**:

```typescript
interface DeckHeaderSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
}

interface StatisticsSectionProps {
  deck: Deck;
}

interface ActionButtonsSectionProps {
  deck: Deck;
  isPremiumLocked: boolean;
  deckStatus: DeckStatus;
  onStartLearning: () => void;
  onContinue: () => void;
  onUpgrade: () => void;
}

interface StatCardProps {
  icon: React.ReactNode;
  label: string;
  value: string | number;
  subtext: string;
}

interface ErrorStateProps {
  error: string;
  onRetry: () => void;
}
```

**Type Dependencies**:

```typescript
import type { Deck, DeckProgress, DeckStatus } from '@/types/deck';
import type { User } from '@/types/user';
```

---

## Testing Strategy

### Unit Testing Checklist

**Component Rendering**:
- [ ] DeckDetailPage renders without errors
- [ ] LoadingSkeleton displays during fetch
- [ ] ErrorState displays on fetch failure
- [ ] NotFoundState displays for invalid deck ID
- [ ] DeckHeaderSection renders with correct data
- [ ] StatisticsSection renders all stats correctly
- [ ] ActionButtonsSection renders correct button for each state

**State Management**:
- [ ] selectDeck called on mount with correct deckId
- [ ] selectedDeck updates when fetch completes
- [ ] isLoading toggles correctly
- [ ] error message displays when fetch fails
- [ ] clearSelection called on unmount

**Navigation**:
- [ ] Breadcrumb link navigates to `/decks`
- [ ] "Start Learning" navigates to `/learn/:id` (when implemented)
- [ ] "Continue Learning" navigates to `/learn/:id`
- [ ] "Upgrade to Premium" navigates to `/upgrade`
- [ ] Back button returns to previous page

**Premium Access**:
- [ ] Premium locked shows for free users + premium decks
- [ ] Premium unlocked shows for premium users + premium decks
- [ ] Free decks accessible to all users
- [ ] Upgrade CTA displays for locked decks

### Integration Testing Checklist

**Deck Loading**:
- [ ] Navigate to `/decks/deck-a1-basics` - loads successfully
- [ ] Navigate to `/decks/invalid-id` - shows not found
- [ ] Click deck card on DecksPage - navigates to detail page
- [ ] Breadcrumb back to DecksPage works

**Premium Validation**:
- [ ] Free user viewing premium deck sees lock icon
- [ ] Free user viewing premium deck sees upgrade CTA
- [ ] Premium user viewing premium deck can start learning
- [ ] Free user viewing free deck can start learning

**Progress States**:
- [ ] Not-started deck shows "Start Learning" button
- [ ] In-progress deck shows "Continue Learning" button
- [ ] In-progress deck shows progress bar
- [ ] Completed deck shows "Review Deck" button
- [ ] Completed deck shows mastery stats

### Accessibility Testing Checklist

**Keyboard Navigation**:
- [ ] Tab order is logical (breadcrumb -> heading -> buttons)
- [ ] Enter/Space activates buttons
- [ ] Focus indicators visible on all interactive elements
- [ ] Escape key closes any modal dialogs (future)

**Screen Reader**:
- [ ] Breadcrumb announced as navigation landmark
- [ ] Heading hierarchy is correct (h1 -> h3)
- [ ] Button labels are descriptive
- [ ] Icon-only elements have aria-labels
- [ ] Loading state announced
- [ ] Error state announced

**Visual Accessibility**:
- [ ] Color contrast meets WCAG AA (4.5:1 for text)
- [ ] Text resizes to 200% without breaking layout
- [ ] No reliance on color alone for information
- [ ] Focus indicators visible and high contrast

### Responsive Testing Checklist

**Mobile (320px - 767px)**:
- [ ] Layout is single column
- [ ] Greek title doesn't overflow
- [ ] Statistics grid is 2 columns
- [ ] Action buttons are full width
- [ ] Progress bar is readable
- [ ] No horizontal scroll

**Tablet (768px - 1023px)**:
- [ ] Statistics grid is 4 columns
- [ ] Content max-width applied
- [ ] Spacing is comfortable
- [ ] Greek typography hierarchy clear

**Desktop (1024px+)**:
- [ ] Content max-width 896px (4xl)
- [ ] Statistics grid is 4 columns
- [ ] All spacing is optimal
- [ ] No excessive whitespace

### Performance Testing

- [ ] Page loads in < 2 seconds on 3G
- [ ] Loading skeleton displays immediately
- [ ] No layout shift when content loads
- [ ] Images lazy load (if added in future)
- [ ] No unnecessary re-renders

---

## Success Criteria Checklist

### Functionality (20 items)

- [ ] Component renders without TypeScript errors
- [ ] URL parameter `:id` correctly extracted
- [ ] Deck fetched on mount via `selectDeck(deckId)`
- [ ] Loading skeleton displays during fetch
- [ ] Error state displays on fetch failure with retry button
- [ ] Not found state displays for invalid deck ID
- [ ] Selected deck data displays correctly
- [ ] Breadcrumb navigation works
- [ ] Premium locked state displays for free users + premium decks
- [ ] Start Learning button appears for not-started decks
- [ ] Continue Learning button appears for in-progress decks
- [ ] Review Deck button appears for completed decks
- [ ] Upgrade to Premium button appears for locked decks
- [ ] Progress bar displays for in-progress/completed decks
- [ ] Statistics section shows all metrics correctly
- [ ] Card distribution shows for started decks
- [ ] Action button click handlers work
- [ ] Component cleanup (clearSelection) on unmount
- [ ] Route registered in App.tsx
- [ ] Documentation updated in Components-Reference.md

### Design & Styling (15 items)

- [ ] Greek title displayed prominently (2xl/3xl)
- [ ] English subtitle below Greek title (base/lg, gray)
- [ ] Level badge color matches level (A1=green, A2=blue, etc.)
- [ ] Premium badge displays for premium decks
- [ ] Lock icon displays when premium locked
- [ ] Progress bar uses correct colors (gray/blue/green)
- [ ] Statistics icons use correct colors
- [ ] Action button gradients match design system
- [ ] Card borders and shadows match style guide
- [ ] Responsive layout works (mobile/tablet/desktop)
- [ ] Typography hierarchy follows style guide
- [ ] Spacing matches design system (4px base unit)
- [ ] Color contrast meets WCAG AA
- [ ] No layout shift when loading completes
- [ ] Hover states work on interactive elements

### Accessibility (12 items)

- [ ] Breadcrumb has `aria-label="Breadcrumb"`
- [ ] Heading hierarchy is semantic (h1 -> h3)
- [ ] Lock icon has `aria-label="Premium locked"`
- [ ] All icons have descriptive labels
- [ ] Buttons have clear labels
- [ ] Loading skeleton has ARIA live region
- [ ] Error state has ARIA alert role
- [ ] Keyboard navigation works (Tab, Enter, Space)
- [ ] Focus indicators visible
- [ ] Screen reader announces all content
- [ ] No reliance on color alone
- [ ] Text resizes to 200% without breaking

### Content & Data (8 items)

- [ ] Greek title renders correctly (UTF-8)
- [ ] English subtitle renders correctly
- [ ] Level badge displays correct level
- [ ] Category displays correctly
- [ ] Author name displays correctly
- [ ] Date formatted correctly (e.g., "Jan 15, 2025")
- [ ] Card counts accurate
- [ ] Percentage calculations correct

### Error Handling (5 items)

- [ ] Invalid deck ID shows not found state
- [ ] Network error shows error state with retry
- [ ] Retry button refetches deck
- [ ] Error message is user-friendly
- [ ] Console has no unhandled errors

### Performance (5 items)

- [ ] Initial render < 100ms
- [ ] Loading skeleton appears immediately
- [ ] No unnecessary re-renders
- [ ] Cleanup function prevents memory leaks
- [ ] No console warnings

**Total Success Criteria**: 65 items

---

## Common Pitfalls & Solutions

### Pitfall 1: Greek Characters Not Displaying Correctly

**Problem**: Greek characters render as question marks or squares.

**Solution**:
- Ensure UTF-8 encoding in HTML `<meta charset="utf-8">`
- Verify mock data strings use correct Greek Unicode characters
- Check font supports Greek characters (system fonts should work)

```tsx
// ✅ Correct
<h1 className="text-2xl">{deck.titleGreek}</h1>

// ❌ Incorrect (ASCII encoding)
<h1 className="text-2xl">{deck.title}</h1> // English only
```

### Pitfall 2: Premium Lock Not Working

**Problem**: Free users can access premium decks.

**Solution**:
- Always check both `deck.isPremium` AND `user.role === 'free'`
- Use consistent logic across all components

```tsx
// ✅ Correct
const isPremiumLocked = deck.isPremium && user?.role === 'free';

// ❌ Incorrect (only checks deck)
const isPremiumLocked = deck.isPremium;
```

### Pitfall 3: Memory Leak from Missing Cleanup

**Problem**: Component continues fetching after unmount, causing memory leaks.

**Solution**:
- Always call `clearSelection()` in useEffect cleanup

```tsx
// ✅ Correct
useEffect(() => {
  if (deckId) {
    selectDeck(deckId);
  }
  return () => {
    clearSelection(); // Cleanup
  };
}, [deckId, selectDeck, clearSelection]);

// ❌ Incorrect (no cleanup)
useEffect(() => {
  selectDeck(deckId);
}, [deckId]);
```

### Pitfall 4: Route Not Found

**Problem**: Navigating to `/decks/:id` shows 404 page.

**Solution**:
- Ensure route is registered BEFORE the `*` wildcard route
- Place route inside `<ProtectedRoute>` wrapper

```tsx
// ✅ Correct order
<Route path="decks" element={<DecksPage />} />
<Route path="decks/:id" element={<DeckDetailPage />} />
<Route path="*" element={<NotFound />} />

// ❌ Incorrect order (wildcard first)
<Route path="*" element={<NotFound />} />
<Route path="decks/:id" element={<DeckDetailPage />} />
```

### Pitfall 5: Stats Show for Not-Started Decks

**Problem**: Mastery rate and accuracy show 0% for decks not yet started.

**Solution**:
- Conditionally render stats based on deck status

```tsx
// ✅ Correct
{progress && progress.status !== 'not-started' && (
  <StatCard label="Mastery Rate" value={`${masteryPercent}%`} />
)}

// ❌ Incorrect (always shows)
<StatCard label="Mastery Rate" value={`${masteryPercent}%`} />
```

### Pitfall 6: Button Handlers Not Working

**Problem**: Clicking "Start Learning" doesn't do anything.

**Solution**:
- Ensure async handlers use `async/await`
- Catch and log errors

```tsx
// ✅ Correct
const handleStartLearning = async () => {
  try {
    await startLearning(deckId);
    navigate(`/learn/${deckId}`);
  } catch (error) {
    console.error('Failed to start learning:', error);
  }
};

// ❌ Incorrect (missing await)
const handleStartLearning = () => {
  startLearning(deckId);
  navigate(`/learn/${deckId}`);
};
```

### Pitfall 7: Loading Skeleton Doesn't Match Final Layout

**Problem**: Layout shifts when loading completes because skeleton doesn't match.

**Solution**:
- Use exact same structure and spacing in skeleton
- Match number of stat cards, card height, etc.

```tsx
// ✅ Correct (matches final layout)
<div className="grid grid-cols-2 md:grid-cols-4 gap-4">
  {[1, 2, 3, 4].map(i => <Skeleton key={i} className="h-24" />)}
</div>

// ❌ Incorrect (different number of items)
<div className="grid grid-cols-3 gap-4">
  {[1, 2, 3].map(i => <Skeleton key={i} className="h-16" />)}
</div>
```

### Pitfall 8: Breadcrumb Link Hardcoded

**Problem**: Breadcrumb always shows "Decks" even when coming from elsewhere.

**Solution**:
- Use `useNavigate(-1)` or `window.history.back()` for dynamic back button
- OR: Use React Router's `<Link to="/decks">`

```tsx
// ✅ Correct (relative to current route)
<Link to="/decks">Decks</Link>

// ✅ Also correct (dynamic back)
<button onClick={() => navigate(-1)}>
  <ChevronLeft /> Back
</button>
```

---

## Accessibility Requirements

### WCAG AA Compliance

**Color Contrast**:
- Text on backgrounds: ≥ 4.5:1 ratio
- Large text (18pt+): ≥ 3:1 ratio
- Interactive elements: ≥ 3:1 ratio against adjacent colors

**Verified Combinations**:
- ✅ Gray-900 on white: 12.63:1
- ✅ Gray-600 on white: 4.95:1
- ✅ White on blue-600 gradient: 4.8:1
- ✅ Amber-800 on amber-100: 5.2:1

### Semantic HTML

```tsx
// ✅ Correct semantic structure
<main>
  <nav aria-label="Breadcrumb">
    <Link to="/decks">Decks</Link>
  </nav>
  <article>
    <header>
      <h1>{deck.titleGreek}</h1>
      <p>{deck.title}</p>
    </header>
    <section aria-labelledby="stats-heading">
      <h2 id="stats-heading" className="sr-only">Statistics</h2>
      {/* stats content */}
    </section>
  </article>
</main>
```

### ARIA Labels

**Required ARIA Attributes**:

```tsx
// Breadcrumb navigation
<nav aria-label="Breadcrumb">

// Icon-only elements
<Lock aria-label="Premium locked" />

// Loading state
<div role="status" aria-live="polite">
  <LoadingSkeleton />
</div>

// Error state
<Alert role="alert" aria-live="assertive">
  {errorMessage}
</Alert>

// Progress bar
<DeckProgressBar
  role="progressbar"
  aria-valuenow={completionPercent}
  aria-valuemin={0}
  aria-valuemax={100}
/>
```

### Keyboard Navigation

**Required Keyboard Interactions**:

| Element | Key | Action |
|---------|-----|--------|
| Breadcrumb link | Tab | Focus link |
| Breadcrumb link | Enter/Space | Navigate to /decks |
| Action button | Tab | Focus button |
| Action button | Enter/Space | Trigger action |
| Back button | Tab | Focus button |
| Back button | Enter | Navigate back |

**Focus Management**:

```tsx
// Ensure focus indicator visible
<Button className="focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
  Start Learning
</Button>
```

### Screen Reader Support

**Announcements**:

```tsx
// Loading announcement
<div role="status" aria-live="polite" className="sr-only">
  Loading deck details...
</div>

// Error announcement
<Alert role="alert" aria-live="assertive">
  <AlertTitle>Error Loading Deck</AlertTitle>
  <AlertDescription>{error}</AlertDescription>
</Alert>

// Success announcement (when starting learning)
<div role="status" aria-live="polite" className="sr-only">
  Deck started successfully. Navigating to learning session...
</div>
```

### Visual Accessibility

**Text Resize**:
- All text resizes to 200% without breaking layout
- Use relative units (rem, em) not fixed (px)
- Test at browser zoom 200%

**Color Independence**:
- Don't rely on color alone to convey status
- Use icons + text for premium/locked state
- Use text labels for progress bar segments

**Focus Indicators**:
- All interactive elements have visible focus ring
- Focus ring color contrasts with background
- Focus ring thickness ≥ 2px

---

## Greek Typography Guidelines

### Typography Hierarchy

**Primary (Greek)**:
- Font size: 2xl (32px) on mobile, 3xl (48px) on desktop
- Font weight: semibold (600)
- Color: gray-900 (#1a1a1a)
- Line height: tight (1.2)

**Secondary (English)**:
- Font size: base (16px) on mobile, lg (18px) on desktop
- Font weight: normal (400)
- Color: gray-600 (#4b5563)
- Line height: relaxed (1.6)

### Implementation Pattern

```tsx
// ✅ Correct Greek typography
<div>
  <h1 className="text-2xl md:text-3xl font-semibold text-gray-900 mb-1">
    {deck.titleGreek}
  </h1>
  <p className="text-base md:text-lg text-gray-600">
    {deck.title}
  </p>
</div>

// ❌ Incorrect (English first)
<div>
  <h1 className="text-2xl font-semibold text-gray-900">
    {deck.title}
  </h1>
  <p className="text-sm text-gray-500">
    {deck.titleGreek}
  </p>
</div>
```

### Font Requirements

**System Font Stack** (supports Greek):
```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
```

**Greek Character Support**:
- All system fonts support Greek Unicode (U+0370 to U+03FF)
- No need for web fonts
- Fallback fonts also support Greek

### UTF-8 Encoding

**HTML Meta Tag** (required):
```html
<meta charset="utf-8">
```

**Mock Data Encoding**:
```tsx
// ✅ Correct (native Greek characters)
titleGreek: 'Βασικές Λέξεις A1'

// ❌ Incorrect (HTML entities)
titleGreek: '&#914;&#945;&#963;&#953;&#954;&#941;&#962; &#923;&#941;&#958;&#949;&#953;&#962; A1'
```

### Responsive Typography

**Mobile (< 768px)**:
- Greek title: 2xl (32px)
- English subtitle: base (16px)
- Minimal line-height for compact display

**Desktop (≥ 768px)**:
- Greek title: 3xl (48px)
- English subtitle: lg (18px)
- Comfortable line-height for readability

```tsx
// Responsive classes
<h1 className="text-2xl md:text-3xl">
  {deck.titleGreek}
</h1>
<p className="text-base md:text-lg">
  {deck.title}
</p>
```

---

## Navigation Flow

### User Journey

1. **Entry Point**: User clicks deck card on `/decks` page
2. **Route**: Navigate to `/decks/:id`
3. **Loading**: Show loading skeleton immediately
4. **Fetch**: Call `selectDeck(deckId)` to fetch deck data
5. **Display**: Show deck details, stats, and progress
6. **Action**: User clicks action button based on deck status
7. **Next Step**: Navigate to learning session or upgrade page

### Navigation Diagram

```
/decks (DecksPage)
  │
  ├─> Click DeckCard
  │
  ├─> /decks/:id (DeckDetailPage)
      │
      ├─> Loading State (LoadingSkeleton)
      │
      ├─> Success State
      │   │
      │   ├─> Premium Locked → "Upgrade to Premium" → /upgrade
      │   ├─> Not Started → "Start Learning" → /learn/:id
      │   ├─> In Progress → "Continue Learning" → /learn/:id
      │   └─> Completed → "Review Deck" → /learn/:id
      │
      ├─> Error State
      │   ├─> "Try Again" → Retry selectDeck()
      │   └─> "Go Back" → navigate(-1)
      │
      └─> Not Found State
          └─> "Browse All Decks" → /decks
```

### Breadcrumb Navigation

```tsx
// Breadcrumb implementation
<nav aria-label="Breadcrumb" className="mb-4 flex items-center gap-2 text-sm">
  <Link to="/decks" className="hover:text-gray-900 flex items-center gap-1">
    <ChevronLeft className="w-4 h-4" />
    Decks
  </Link>
  <span>/</span>
  <span className="text-gray-900 font-medium">{deck.titleGreek}</span>
</nav>
```

---

## Final Validation

### Pre-Implementation Checklist

- [ ] Read all implementation steps thoroughly
- [ ] Understand existing components to reuse
- [ ] Have access to mock data structure
- [ ] Understand deckStore actions
- [ ] Review Style Guide for colors/spacing
- [ ] Review Components Reference for patterns

### During Implementation Checklist

- [ ] Follow steps sequentially (1-7)
- [ ] Test each step before moving to next
- [ ] Use exact code examples provided
- [ ] Maintain TypeScript type safety
- [ ] Follow naming conventions
- [ ] Use Tailwind utility classes only

### Post-Implementation Checklist

- [ ] All 65 success criteria met
- [ ] Component renders without errors
- [ ] TypeScript compiles with 0 errors
- [ ] ESLint shows 0 warnings
- [ ] All routes work correctly
- [ ] All states tested (loading, error, success, not found)
- [ ] Accessibility checklist complete (12/12)
- [ ] Responsive design tested (mobile/tablet/desktop)
- [ ] Documentation updated
- [ ] Code reviewed for best practices

---

**Plan Status**: ✅ Ready for Execution
**Estimated Completion Time**: 90 minutes
**Next Action**: Execute implementation steps 1-7 sequentially

---

**Document Version**: 1.0
**Last Updated**: 2025-11-01
**Author**: System Analyst & Technical Planner
