---
id: task-150
title: 07.02 Get Single Card Endpoint
status: To Do
assignee: []
created_date: '2025-12-08 05:21'
labels:
  - backend
  - api
  - cards
  - task-07
dependencies: []
priority: high
---

## Description

<!-- SECTION:DESCRIPTION:BEGIN -->
# 07.02 Get Single Card Endpoint

## Overview
Implement the GET /api/v1/cards/{id} endpoint for retrieving a single card by its UUID.

## Technical Specification

### Files to Modify

1. **Modify**: `src/api/v1/cards.py` - Add get_card endpoint

### Endpoint Implementation

Add to `src/api/v1/cards.py`:

```python
from src.core.exceptions import CardNotFoundException

@router.get(
    "/{card_id}",
    response_model=CardResponse,
    summary="Get card by ID",
    description="Get a single card by its UUID.",
    responses={
        200: {
            "description": "Card details",
            "content": {
                "application/json": {
                    "example": {
                        "id": "660e8400-e29b-41d4-a716-446655440001",
                        "deck_id": "550e8400-e29b-41d4-a716-446655440000",
                        "front_text": "kalimera",
                        "back_text": "good morning",
                        "example_sentence": "Kalimera! Pos eisai?",
                        "pronunciation": "kalimera",
                        "difficulty": "easy",
                        "order_index": 1,
                        "created_at": "2024-01-15T10:30:00Z",
                        "updated_at": "2024-01-15T10:30:00Z"
                    }
                }
            },
        },
        404: {"description": "Card not found"},
    },
)
async def get_card(
    card_id: UUID,
    db: AsyncSession = Depends(get_db),
) -> CardResponse:
    """Get a specific card by ID.

    This is a public endpoint that returns full card details.

    Args:
        card_id: UUID of the card to retrieve
        db: Database session (injected)

    Returns:
        CardResponse with card details

    Raises:
        CardNotFoundException: If card doesn't exist
    """
    repo = CardRepository(db)

    card = await repo.get(card_id)
    if card is None:
        raise CardNotFoundException(card_id=str(card_id))

    return CardResponse.model_validate(card)
```

### API Contract

**Endpoint**: GET /api/v1/cards/{card_id}

**Path Parameters**:
| Parameter | Type | Description |
|-----------|------|-------------|
| card_id | UUID | Card UUID |

**Response** (200 OK):
```json
{
  "id": "660e8400-e29b-41d4-a716-446655440001",
  "deck_id": "550e8400-e29b-41d4-a716-446655440000",
  "front_text": "kalimera",
  "back_text": "good morning",
  "example_sentence": "Kalimera! Pos eisai?",
  "pronunciation": "kalimera",
  "difficulty": "easy",
  "order_index": 1,
  "created_at": "2024-01-15T10:30:00Z",
  "updated_at": "2024-01-15T10:30:00Z"
}
```

**Error Responses**:
- 404: Card not found
- 422: Invalid UUID format

### Implementation Notes

- Use CardResponse schema (already exists in `src/schemas/card.py`)
- Use CardNotFoundException from `src/core/exceptions.py`
- No authentication required (public endpoint)
- Return full card details including deck_id

### Route Ordering Note

IMPORTANT: This endpoint must be defined AFTER the /search endpoint in the router to avoid path conflicts (FastAPI matches routes in order).

## Verification Steps

1. Test endpoint with valid card_id returns card
2. Test endpoint with non-existent card_id returns 404
3. Test endpoint with invalid UUID format returns 422
4. Verify response includes all card fields
5. Verify card from inactive deck is still accessible
<!-- SECTION:DESCRIPTION:END -->
