# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME="Learn Greek Easy API"
APP_VERSION="0.1.0"
APP_ENV="development"  # development, staging, production
DEBUG=true
API_V1_PREFIX="/api/v1"

# Server Configuration
HOST="0.0.0.0"
PORT=8000
RELOAD=true

# =============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# =============================================================================
DATABASE_HOST="localhost"
DATABASE_PORT=5432
DATABASE_NAME="learn_greek_easy"
DATABASE_USER="postgres"
DATABASE_PASSWORD="postgres"
DATABASE_URL="postgresql+asyncpg://${DATABASE_USER}:${DATABASE_PASSWORD}@${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}"

# Database Pool Settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST="localhost"
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=""
REDIS_URL="redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}"

# Redis Cache Settings (Legacy)
CACHE_TTL_SECONDS=300
SESSION_TTL_SECONDS=1800

# Session Storage Configuration
SESSION_STORAGE_BACKEND="redis"
SESSION_KEY_PREFIX="refresh:"
SESSION_TTL_DAYS=30

# Cache Configuration
CACHE_ENABLED=true
CACHE_KEY_PREFIX="cache"
CACHE_DEFAULT_TTL=300
CACHE_DECK_LIST_TTL=300
CACHE_DECK_DETAIL_TTL=600
CACHE_CARDS_BY_DECK_TTL=300
CACHE_USER_PROGRESS_TTL=60
CACHE_DUE_CARDS_TTL=30
CACHE_USER_STATS_TTL=120

# =============================================================================
# AUTHENTICATION & SECURITY
# =============================================================================

# JWT Settings
JWT_SECRET_KEY="your-super-secret-jwt-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Password Hashing
BCRYPT_ROUNDS=12

# Google OAuth (Task 3)
GOOGLE_CLIENT_ID=""
GOOGLE_CLIENT_SECRET=""
GOOGLE_REDIRECT_URI="http://localhost:8000/api/v1/auth/google/callback"

# =============================================================================
# EMAIL CONFIGURATION (Future)
# =============================================================================
SMTP_HOST="smtp.gmail.com"
SMTP_PORT=587
SMTP_USER=""
SMTP_PASSWORD=""
SMTP_FROM_EMAIL="noreply@learngreekeasy.com"
SMTP_FROM_NAME="Learn Greek Easy"

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS="http://localhost:5173,http://localhost:3000"
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS="GET,POST,PUT,DELETE,PATCH,OPTIONS"
CORS_ALLOW_HEADERS="*"
# Headers exposed to browser JavaScript (comma-separated or JSON array)
CORS_EXPOSE_HEADERS="X-Request-ID,X-RateLimit-Limit,X-RateLimit-Remaining,X-RateLimit-Reset"

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_AUTH_PER_MINUTE=5

# =============================================================================
# HEALTH CHECKS
# =============================================================================
HEALTH_CHECK_DB_TIMEOUT=5
HEALTH_CHECK_REDIS_TIMEOUT=3
HEALTH_CHECK_MEMORY_WARNING_PERCENT=80

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging
LOG_LEVEL="INFO"  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT="json"  # json, text
LOG_FILE="logs/app.log"
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# Sentry (Error Tracking)
SENTRY_DSN=""
SENTRY_ENVIRONMENT="development"
SENTRY_TRACES_SAMPLE_RATE=0.1

# =============================================================================
# FRONTEND INTEGRATION
# =============================================================================
FRONTEND_URL="http://localhost:5173"

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_GOOGLE_OAUTH=false
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_RATE_LIMITING=true
FEATURE_BACKGROUND_TASKS=false

# =============================================================================
# E2E TEST SEEDING (NEVER enable in production!)
# =============================================================================
# Enable E2E test database seeding endpoints
TEST_SEED_ENABLED=false
# Optional secret for seed endpoint protection (header: X-Test-Seed-Secret)
TEST_SEED_SECRET=
# Auto-seed database on startup (local development only)
SEED_ON_DEPLOY=false

# =============================================================================
# POSTHOG ANALYTICS (Optional)
# =============================================================================
# PostHog API key for server-side analytics (leave empty to disable)
# Get from: https://app.posthog.com/project/settings
POSTHOG_API_KEY=

# PostHog host URL
POSTHOG_HOST=https://us.i.posthog.com

# Environment identifier (development/staging/production/test)
# Used by PostHog to filter events
ENVIRONMENT=development

# =============================================================================
# CONTENT & BUSINESS LOGIC
# =============================================================================

# Spaced Repetition (SM-2 Algorithm)
SRS_INITIAL_EASE_FACTOR=2.5
SRS_MIN_EASE_FACTOR=1.3
SRS_MASTERED_THRESHOLD_DAYS=21

# Pagination
DEFAULT_PAGE_SIZE=20
MAX_PAGE_SIZE=100

# Streak Tracking
STREAK_RESET_HOUR_UTC=0  # Midnight UTC
